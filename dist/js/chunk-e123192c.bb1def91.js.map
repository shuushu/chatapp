{"version":3,"sources":["webpack:///./src/container/Member.vue?d832","webpack:///src/container/Member.vue","webpack:///./src/container/Member.vue?9357","webpack:///./src/container/Member.vue","webpack:///./src/container/Message.vue?1f64","webpack:///./node_modules/timers-browserify/main.js","webpack:///./node_modules/setimmediate/setImmediate.js","webpack:///./src/components/Talkbox.vue?9c2a","webpack:///./src/container/Member.vue?4711","webpack:///./src/container/Message.vue?01cb","webpack:///src/container/Message.vue","webpack:///./src/components/Talkbox.vue?f2a1","webpack:///src/components/Talkbox.vue","webpack:///./src/components/Talkbox.vue?fd84","webpack:///./src/components/Talkbox.vue","webpack:///./src/container/Message.vue?e5df","webpack:///./src/container/Message.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","class","invite","chatMember","style","attrs","id","md-diameter","md-mode","member","md-icon","md-label","md-description","_l","items","key","auth","uid","disabled","value","model","callback","$$v","checkArr","expression","src","photoURL","alt","displayName","_v","_s","email","_e","btnWrap","length","on","click","memberJoin","toggle","staticRenderFns","Membervue_type_script_lang_js_","name","data","props","type","Object","winh","Number","default","computed","objectSpread","fetchData","filter","vuex_esm","state","isLoading","ready","memberList","namespace","SET_FILTER","created","getMember","methods","GET_MEMBER","setJoin","SET_JOIN","$store","dispatch","_this","i","message","push","then","roomKey","$router","params","TOADY","util","Date","today","GET_CHAT_DATE","res","GET_MESSAGE","GET_OLD_MESSAGE","container_Membervue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Message_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Message_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","n","global","scope","self","window","apply","Function","prototype","Timeout","clearFn","_id","_clearFn","exports","setTimeout","call","arguments","clearTimeout","setInterval","clearInterval","timeout","close","unref","ref","enroll","item","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","setImmediate","clearImmediate","process","undefined","registerImmediate","nextHandle","tasksByHandle","currentlyRunningATask","doc","document","attachTo","getPrototypeOf","toString","installNextTickImplementation","canUsePostMessage","installPostMessageImplementation","MessageChannel","installMessageChannelImplementation","createElement","installReadyStateChangeImplementation","installSetTimeoutImplementation","args","Array","task","handle","run","runIfPresent","nextTick","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","messagePrefix","Math","random","onGlobalMessage","event","source","indexOf","slice","addEventListener","attachEvent","channel","port1","port2","html","documentElement","script","onreadystatechange","removeChild","appendChild","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Talkbox_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Talkbox_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Member_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Member_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","timer","inviteWrap","$route","h","date","pk","isWrite","write","mappingAvatar","mappingUserName","path","domProps","innerHTML","text","msg","unread","sendWaitCheck","md-stroke","pgr","md-value","tipFlag","roomList","$event","scrollToEnd","allMember","lwrite","Talkboxvue_type_template_id_3cabb2d5_render","old","notice","right","_t","Talkboxvue_type_template_id_3cabb2d5_staticRenderFns","Talkboxvue_type_script_lang_js_","Boolean","components_Talkboxvue_type_script_lang_js_","Talkbox","Messagevue_type_script_lang_js_","components","Member","loadOnce","roomkey","scrollFlag","sendWait","preview","chat","oldMsg","chatDate","progress","watch","bodyNode","querySelector","overflow","removeAttribute","keys_default","node","getElementById","display","timers_browserify_main","currentView","destroyed","main","$off","_this2","$on","sendMsg","$run","updated","_this3","beforeRouteEnter","to","from","next","innerHeight","idx","msgSize","sunUnread","cnt","init","container","$el","body","deviceHeight","current","scrollTop","scrollHeight","historyBack","go","_sendMsg","asyncToGenerator","regeneratorRuntime","mark","_callee","_this4","wrap","_context","prev","addFile","$emit","ADD_IMAGE","stop","_x","clear","thumb","container_Messagevue_type_script_lang_js_","Message_component"],"mappings":"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","file":"js/chunk-e123192c.bb1def91.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page\",class:{ invite: _vm.chatMember },style:((\"height:\" + (this.winh) + \"px\")),attrs:{\"id\":\"memberList\"}},[(_vm.isLoading)?_c('div',{staticClass:\"wrap-center\"},[_c('md-progress-spinner',{attrs:{\"md-diameter\":50,\"md-mode\":\"indeterminate\"}})],1):_c('div',[(_vm.member === null)?_c('div',{staticClass:\"md-empty-state-wrap\"},[_c('md-empty-state',{staticClass:\"md-primary\",attrs:{\"md-icon\":\"sentiment_dissatisfied\",\"md-label\":\"Nothing in Done\",\"md-description\":\"대화 가능 한 멤버 없음\"}})],1):_c('md-list',_vm._l((_vm.fetchData),function(items,key){return _c('div',{key:key},[(_vm.auth.uid != key)?_c('md-list-item',{staticClass:\"md-triple-line md-dense\"},[_c('md-checkbox',{attrs:{\"disabled\":items.disabled,\"value\":items.uid},model:{value:(_vm.checkArr),callback:function ($$v) {_vm.checkArr=$$v},expression:\"checkArr\"}}),_c('md-avatar',[_c('img',{attrs:{\"src\":items.photoURL,\"alt\":items.displayName}})]),_c('div',{staticClass:\"md-list-item-text\"},[_c('span',{staticClass:\"title\"},[_vm._v(_vm._s(items.displayName))]),_c('span',{staticClass:\"desc\"},[_vm._v(_vm._s(items.email))])])],1):_vm._e()],1)}),0),_c('div',{class:{ btnWrap: _vm.chatMember }},[(_vm.checkArr.length > 0)?_c('md-button',{staticClass:\"join md-raised md-accent\",on:{\"click\":_vm.memberJoin}},[_c('md-icon',{staticClass:\"md-primary\"},[_vm._v(\"people\")]),_vm._v(\" JOIN\\n        \")],1):_vm._e(),(_vm.chatMember)?_c('md-button',{staticClass:\"join md-raised md-primary\",on:{\"click\":_vm.toggle}},[_c('md-icon',{staticClass:\"md-primary\"},[_vm._v(\"cancel\")]),_vm._v(\" cancel\\n        \")],1):_vm._e()],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"memberList\" class=\"page\" :class=\"{ invite: chatMember }\" :style=\"`height:${this.winh}px`\">\r\n    <div v-if=\"isLoading\" class=\"wrap-center\">\r\n      <md-progress-spinner :md-diameter=\"50\" md-mode=\"indeterminate\"></md-progress-spinner>\r\n    </div>\r\n    <div v-else>\r\n      <div v-if=\"member === null\" class=\"md-empty-state-wrap\">\r\n        <md-empty-state\r\n          class=\"md-primary\"\r\n          md-icon=\"sentiment_dissatisfied\"\r\n          md-label=\"Nothing in Done\"\r\n          md-description=\"대화 가능 한 멤버 없음\">\r\n        </md-empty-state>\r\n      </div>      \r\n      <md-list v-else>\r\n        <div v-for=\"(items, key) in fetchData\" :key=\"key\">\r\n            <md-list-item class=\"md-triple-line md-dense\" v-if=\"auth.uid != key\">\r\n                <md-checkbox :disabled=\"items.disabled\" v-model=\"checkArr\" :value=\"items.uid\"></md-checkbox>\r\n                <md-avatar>\r\n                  <img :src=\"items.photoURL\" :alt=\"items.displayName\">\r\n                </md-avatar>\r\n\r\n                <div class=\"md-list-item-text\">\r\n                  <span class=\"title\">{{ items.displayName }}</span>\r\n                  <span class=\"desc\">{{ items.email }}</span>\r\n                </div>\r\n            </md-list-item>          \r\n        </div>\r\n      </md-list>\r\n      <div :class=\"{ btnWrap: chatMember }\">\r\n          <md-button v-if=\"checkArr.length > 0\" class=\"join md-raised md-accent\" @click=\"memberJoin\">\r\n            <md-icon class=\"md-primary\">people</md-icon> JOIN\r\n          </md-button>\r\n          <md-button v-if=\"chatMember\" class=\"join md-raised md-primary\" @click=\"toggle\">\r\n            <md-icon class=\"md-primary\">cancel</md-icon> cancel\r\n          </md-button>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import { mapState, mapGetters, mapActions } from 'vuex'\r\n  import { CHAT, MEMBER } from '@/store/namespace'\r\n  import { yyyymm } from '@/common/util'\r\n  \r\n  export default {\r\n    name: 'Member',\r\n    data () {\r\n      return {        \r\n          checkArr: []\r\n      }\r\n    },\r\n    props: {\r\n        chatMember: {\r\n          type: Object\r\n        },\r\n        winh: {\r\n          type: Number,\r\n          default: null\r\n        }\r\n    },\r\n    computed: {\r\n      fetchData() {  \r\n        if (this.chatMember) {         \r\n          return this.filter(this.member, this.chatMember)\r\n        } else {\r\n          return this.member\r\n        }        \r\n      },\r\n      ...mapState({\r\n          auth: state => state.auth,\r\n          isLoading: state => state.ready,\r\n          member: state => state.member.memberList\r\n      }),\r\n      ...mapGetters({\r\n        filter: MEMBER.SET_FILTER\r\n      }) \r\n    },\r\n    created () {  \r\n      this.getMember()\r\n    },\r\n    methods: {\r\n        ...mapActions({\r\n          getMember: MEMBER.GET_MEMBER,\r\n          setJoin: MEMBER.SET_JOIN\r\n        }),\r\n        toggle () {\r\n            this.$store.dispatch('invite')\r\n        },\r\n        memberJoin() {            \r\n            // 채팅방에서 초대할때\r\n            if(this.chatMember) {\r\n              this.$store.dispatch('dialogAlert', { message: '초대하였습니다.' })\r\n              \r\n              for (let i in this.chatMember) {\r\n                this.checkArr.push(i)\r\n              }\r\n            } else {\r\n              // 내 uid 추가              \r\n              this.checkArr.push(this.auth.uid);\r\n            }\r\n   \r\n            this.setJoin(this.checkArr).then(roomKey => {              \r\n                this.$router.push({\r\n                  name: 'message',\r\n                  params: {\r\n                    id: roomKey\r\n                  }\r\n                })\r\n                \r\n                const TOADY = yyyymm(new Date());\r\n\r\n                if(this.chatMember) {\r\n                    let data = {\r\n                      key: roomKey,\r\n                      today: TOADY\r\n                    };\r\n\r\n                    // [비정상 접근]새로 고침시 채팅에 속한 멤버 정보가 없으므로 리스트로 보낸다.\r\n                    if (this.member === null) {        \r\n                      this.$router.push('/list')\r\n                    } else {\r\n                      //this.$store.dispatch(CHAT.GET_CHAT_MEMBER, data)                      \r\n                      this.$store.dispatch(CHAT.GET_CHAT_DATE, data).then(res => {\r\n                        if (res) {\r\n                            this.$store.dispatch(CHAT.GET_MESSAGE, data)\r\n                            this.$store.dispatch(CHAT.GET_OLD_MESSAGE, data)\r\n                            this.toggle();\r\n                        }\r\n                      })\r\n                    } \r\n                }\r\n            })\r\n        }        \r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n#memberList{\r\n  &.invite{\r\n    position: fixed;\r\n    z-index: 30;\r\n    top: 56px;\r\n    width: 100%;\r\n    right: 0;\r\n    box-sizing: border-box;\r\n    background: rgba(0, 0, 0, .5);\r\n    > div{\r\n      margin-left: 20%;\r\n      height: 100%;\r\n      position: absolute;\r\n      width: 80%;\r\n      right: 0;\r\n      padding-top: 0;\r\n      background: #fff;\r\n    }\r\n    .btnWrap{\r\n      display: flex;\r\n      padding: 0 10px 80px 10px;      \r\n      margin: 0;\r\n      background: #fff;\r\n      .md-accent,\r\n      .md-accent + .md-button{\r\n        width: 48%;\r\n      }\r\n    }\r\n  }\r\n  .md-checkbox {\r\n    margin-right: 15px;\r\n  }\r\n  .md-avatar {\r\n    margin-right: 15px;\r\n  }\r\n  .join {\r\n    i {\r\n      margin-right: 5px;\r\n    }\r\n    width: 95%;\r\n    display: block;\r\n    margin: 20px auto;\r\n    font-size: 16px;\r\n    line-height: 24px;\r\n    font-weight: normal;\r\n  }\r\n  .md-list-item{    \r\n    &::after{\r\n      content: '';\r\n      width: 98%;\r\n      height: 1px;\r\n      display: block;\r\n      background-color: #ccc;\r\n      margin: 0 auto;\r\n    }\r\n    .md-list-item-container{\r\n      padding: 10px 0;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Member.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Member.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Member.vue?vue&type=template&id=9ba8e8ae&\"\nimport script from \"./Member.vue?vue&type=script&lang=js&\"\nexport * from \"./Member.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Member.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=style&index=0&lang=scss&\"","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 6–8\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Talkbox.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Talkbox.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Member.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Member.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page\",class:{ inviteWrap:_vm.invite },attrs:{\"id\":\"message\"}},[_c('div',{staticClass:\"message-wrap\",style:((\"min-height:\" + (this.$route.params.h-80) + \"px\"))},[_vm._l((_vm.oldMsg),function(date,pk){return _c('div',{key:(\"old-\" + pk),staticClass:\"old-items\"},_vm._l((date),function(item,key){return _c('div',{key:(\"old-item-\" + key),staticClass:\"talk-items\",class:_vm.isWrite(item.write)},[(_vm.isWrite(item.write) != 'notice')?_c('div',{staticClass:\"img-wrap\"},[_c('md-avatar',[_c('img',{attrs:{\"src\":_vm.mappingAvatar(item.write),\"alt\":_vm.mappingUserName(item.write)}})]),_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(_vm.mappingUserName(item.write)))])],1):_vm._e(),_c('div',{staticClass:\"talk-wrap\"},[_c('Talkbox',{class:_vm.isWrite(item.write)},[(item.type === 1)?_c('div',{staticClass:\"addfile-image\"},[_c('img',{attrs:{\"src\":item.path,\"alt\":\"\"}})]):_vm._e(),(item.vhtml)?_c('span',{domProps:{\"innerHTML\":_vm._s(item.text)}}):_c('span',[_vm._v(_vm._s(item.text))])])],1)])}),0)}),_vm._l((_vm.message),function(msg,pk,i){return _c('div',{key:pk,staticClass:\"talk-items\",class:_vm.isWrite(msg.write)},[(_vm.isWrite(msg.write) != 'notice')?_c('div',{staticClass:\"img-wrap\"},[_c('md-avatar',[_c('img',{attrs:{\"src\":_vm.mappingAvatar(msg.write),\"alt\":_vm.mappingUserName(msg.write)}})]),_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(_vm.mappingUserName(msg.write)))])],1):_vm._e(),_c('div',{staticClass:\"talk-wrap\"},[_c('Talkbox',{class:_vm.isWrite(msg.write)},[(msg.type === 1)?_c('div',{staticClass:\"addfile-image\"},[_c('img',{attrs:{\"src\":msg.path,\"alt\":\"\"}})]):_vm._e(),(msg.vhtml)?_c('span',{domProps:{\"innerHTML\":_vm._s(msg.text)}}):_c('span',[_vm._v(_vm._s(msg.text))]),(msg.unread !== 0)?_c('span',{staticClass:\"unread\"},[_vm._v(\"\\n                \"+_vm._s(msg.unread)+\"\\n              \")]):_vm._e(),(_vm.sendWaitCheck(i))?_c('md-progress-spinner',{staticClass:\"md-accent msgLoading\",attrs:{\"md-diameter\":10,\"md-stroke\":1,\"md-mode\":\"indeterminate\"}}):_vm._e()],1)],1)])})],2),(_vm.pgr > 0 && _vm.pgr < 100)?_c('div',{staticClass:\"upload-progress\"},[_c('md-progress-spinner',{staticClass:\"md-accent\",attrs:{\"md-mode\":\"determinate\",\"md-value\":_vm.pgr}})],1):_vm._e(),_c('transition',{attrs:{\"name\":\"popmember\"}},[(_vm.invite)?_c('Member',{attrs:{\"winh\":this.$route.params.h,\"chatMember\":_vm.chatMember.data}}):_vm._e()],1),_c('transition',{attrs:{\"name\":\"msgAlarm\"}},[(_vm.tipFlag === true && _vm.roomList !== false)?_c('div',{staticClass:\"alarmLayer\",on:{\"click\":function($event){return _vm.scrollToEnd('pop');}}},[_c('div',{staticClass:\"wrap\"},[_c('md-avatar',[_c('img',{attrs:{\"src\":_vm.allMember[_vm.roomList[this.$route.params.id].lwrite].photoURL,\"alt\":_vm.allMember[_vm.roomList[this.$route.params.id].lwrite].displayName}})]),_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(_vm.allMember[_vm.roomList[this.$route.params.id].lwrite].displayName))]),_c('span',{staticClass:\"text\"},[_vm._v(_vm._s(_vm.roomList[this.$route.params.id].text))])],1)]):_vm._e()])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"message\"  class=\"page\" :class=\"{ inviteWrap:invite }\">\r\n    <div class=\"message-wrap\" :style=\"`min-height:${this.$route.params.h-80}px`\">\r\n        <!-- 이전 메세지 -->\r\n        <div class=\"old-items\" v-for=\"(date, pk) in oldMsg\" :key=\"`old-${pk}`\">\r\n          <div class=\"talk-items\" :class=\"isWrite(item.write)\" v-for=\"(item, key) in date\" :key=\"`old-item-${key}`\">              \r\n              <div class=\"img-wrap\" v-if=\"isWrite(item.write) != 'notice'\">\r\n                <md-avatar>            \r\n                  <img :src=\"mappingAvatar(item.write)\" :alt=\"mappingUserName(item.write)\">\r\n                </md-avatar>\r\n                <span class=\"name\">{{ mappingUserName(item.write) }}</span>\r\n              </div>\r\n              <div class=\"talk-wrap\">\r\n                  <Talkbox :class=\"isWrite(item.write)\">\r\n                    <div class=\"addfile-image\" v-if=\"item.type === 1\"><img :src=\"item.path\" alt=\"\"></div>\r\n                    <span v-if=\"item.vhtml\" v-html=\"item.text\"></span>\r\n                    <span v-else>{{ item.text }}</span>                    \r\n                  </Talkbox>\r\n              </div>              \r\n          </div>        \r\n        </div>\r\n        <!-- 신규 메세지 -->\r\n        <div class=\"talk-items\" :class=\"isWrite(msg.write)\" v-for=\"(msg, pk, i) in message\" :key=\"pk\">\r\n          <div class=\"img-wrap\" v-if=\"isWrite(msg.write) != 'notice'\">\r\n            <md-avatar>            \r\n              <img :src=\"mappingAvatar(msg.write)\" :alt=\"mappingUserName(msg.write)\">\r\n            </md-avatar>\r\n            <span class=\"name\">{{ mappingUserName(msg.write) }}</span>\r\n          </div>\r\n          <div class=\"talk-wrap\">\r\n              <Talkbox :class=\"isWrite(msg.write)\">\r\n                <div class=\"addfile-image\" v-if=\"msg.type === 1\"><img :src=\"msg.path\" alt=\"\"></div>\r\n                <span v-if=\"msg.vhtml\" v-html=\"msg.text\"></span>\r\n                <span v-else>{{ msg.text }}</span>\r\n                \r\n                <span v-if=\"msg.unread !== 0\" class=\"unread\">\r\n                  {{ msg.unread }}\r\n                </span>\r\n                <!-- <time v-if=\"msg.type !== 3\" :datetime=\"msg.today\" class=\"date\">{{ msg.today }}</time> -->\r\n                <md-progress-spinner v-if=\"sendWaitCheck(i)\"  :md-diameter=\"10\" class=\"md-accent msgLoading\" :md-stroke=\"1\" md-mode=\"indeterminate\"></md-progress-spinner>\r\n              </Talkbox>\r\n          </div>\r\n        </div>\r\n    </div>\r\n    <!-- 이미지 업로드 로딩바 -->\r\n    <div class=\"upload-progress\" v-if=\"pgr > 0 && pgr < 100\">\r\n      <md-progress-spinner class=\"md-accent\" md-mode=\"determinate\" :md-value=\"pgr\"></md-progress-spinner>\r\n    </div>\r\n    <!-- 다른멤버초대 -->\r\n    <transition name=\"popmember\">\r\n      <Member :winh=\"this.$route.params.h\" :chatMember=\"chatMember.data\" v-if=\"invite\" />\r\n    </transition>\r\n    <!-- 메세지토스트 -->\r\n    <transition name=\"msgAlarm\">\r\n      <div class=\"alarmLayer\" v-if=\"tipFlag === true && roomList !== false\" @click=\"scrollToEnd('pop');\">\r\n        <div class=\"wrap\">\r\n          <md-avatar>            \r\n            <img :src=\"allMember[roomList[this.$route.params.id].lwrite].photoURL\" :alt=\"allMember[roomList[this.$route.params.id].lwrite].displayName\" />\r\n          </md-avatar>\r\n          <span class=\"name\">{{allMember[roomList[this.$route.params.id].lwrite].displayName}}</span>\r\n          <span class=\"text\">{{roomList[this.$route.params.id].text}}</span>\r\n        </div>\r\n      </div>      \r\n    </transition>\r\n  </div>  \r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex'\r\nimport { CHAT } from '@/store/namespace'\r\nimport Talkbox from '@/components/Talkbox.vue'\r\nimport Member from '@/container/Member.vue'\r\nimport { EventBus } from '@/main'  \r\nimport { yyyymm, isCurrentView } from '@/common/util'\r\nimport { setTimeout, clearTimeout } from 'timers';\r\n\r\n  let timer;\r\n  export default {\r\n    name: 'Message',\r\n    components: { \r\n      Talkbox,\r\n      Member\r\n    },\r\n    data () {\r\n      return {\r\n        loadOnce: false,\r\n        tipFlag: false,\r\n        roomkey: null,\r\n        scrollFlag: false,\r\n        sendWait: false,\r\n        preview: null\r\n      }\r\n    },\r\n    computed: {\r\n      ...mapState({\r\n          invite: state => state.invite, // 초대창UI상태 flag\r\n          auth: state => state.auth, // 내정보\r\n          message: state => state.chat.message, // 메세지 Array\r\n          oldMsg: state => state.chat.oldMsg, // 이전메세지\r\n          allMember: state => state.member.memberList, // 모든멤버\r\n          chatMember: state => state.chat.chatMember, // 참여된 멤버\r\n          chatDate: state => state.chat.chatDate, // 메세지 date\r\n          roomList: state => state.chat.roomList,          \r\n          pgr: state => state.chat.progress // 이미지 로딩 프로그래스\r\n      })\r\n    },\r\n    watch: { \r\n      invite(value) {\r\n        let bodyNode = document.querySelector('body');\r\n\r\n        if (value) {\r\n          bodyNode.style.overflow = 'hidden';\r\n        } else {\r\n          bodyNode.removeAttribute('style');\r\n        }\r\n      },\r\n      chatMember() {\r\n        // 1:1방에서 상대방이 방삭제하면 혼자만 남기때문에 메세지폼을 쓸 수 없게 한다.      \r\n        if (this.chatMember) {\r\n          if (Object.keys(this.chatMember.data).length <= 1) {\r\n              let node = document.getElementById('footer');        \r\n              node.style.display = 'none';\r\n          } \r\n        } \r\n      },\r\n      message() {\r\n        setTimeout(() => {\r\n          if (this.roomList) {\r\n              if (this.loadOnce !== false && this.auth.uid !== this.roomList.lwrite) {\r\n                let currentView = this.scrollToEnd();                \r\n\r\n                // 이전 메세지를 보고 있을 때\r\n                if (currentView === false) {                  \r\n                  this.tipFlag = true;\r\n\r\n                  if (timer) {\r\n                    clearTimeout(timer)\r\n                  }\r\n                  \r\n                  timer = setTimeout(() => {\r\n                    this.tipFlag = false\r\n                  }, 5000)\r\n                }\r\n              }\r\n          }\r\n          this.loadOnce = true;\r\n        }, 1000)       \r\n      }   \r\n    },\r\n    destroyed() {\r\n      EventBus.$off('sendMessage')\r\n      EventBus.$off('imgPreview')\r\n      this.$store.dispatch('chat/SET_JOIN', {\r\n        type: 'OUT',\r\n        key: this.roomkey\r\n      })\r\n      let bodyNode = document.querySelector('body');\r\n      bodyNode.removeAttribute('style');\r\n\r\n      let node = document.getElementById('footer');        \r\n      node.removeAttribute('style');\r\n      //this.$run(CHAT.REMOVE_LATEST, this.roomkey)\r\n    },\r\n    created () {\r\n      this.roomkey = this.$route.params.id\r\n      let data = {\r\n        key: this.roomkey,\r\n        today: yyyymm(new Date())\r\n      };      \r\n      // 풋터메세지폼\r\n      EventBus.$on('sendMessage', value => {        \r\n        if (value) {\r\n            this.sendMsg(value)\r\n        }        \r\n      })\r\n      // 이미지 추가 프리뷰\r\n      EventBus.$on('imgPreview', path => {\r\n        this.preview = path\r\n      })\r\n\r\n      // [비정상 접근]새로 고침시 채팅에 속한 멤버 정보가 없으므로 리스트로 보낸다.\r\n      if (this.chatMember === null) {        \r\n        this.$router.push('/list')\r\n      } else {\r\n        //this.$run(CHAT.SET_LATEST, data)\r\n\r\n      }\r\n      this.$store.dispatch(CHAT.GET_CHAT_DATE, data).then(res => {\r\n          if (res) {\r\n            this.$store.dispatch(CHAT.GET_MESSAGE, data)\r\n            this.$run(CHAT.GET_OLD_MESSAGE, data)\r\n            // 내접속상태 변경\r\n            this.$store.dispatch('chat/SET_JOIN', {\r\n                type: 'IN',\r\n                key: data.key\r\n            });\r\n          }\r\n      })\r\n    },\r\n    updated() {\r\n      if (!this.scrollFlag) {          \r\n        setTimeout(() => {\r\n          this.scrollToEnd(true);\r\n        }, 600)\r\n        this.scrollFlag = true\r\n      }\r\n    },\r\n    beforeRouteEnter (to, from, next) {\r\n      /* \r\n        슬라이드 시 내용이 없을때 영역이 크롭 이슈가 발생(컨텐츠 영역의 높이 list영역보다 작기때문에)\r\n        따라서 dom에 마운트 되기전에 현재 영역의 높이를 지정한다.\r\n      */\r\n      to.params.h = window.innerHeight\r\n      next()\r\n    },\r\n    methods: {\r\n        sendWaitCheck(idx) {\r\n          // 메세지가 wait상태일때 마지막 메세지 wait처리\r\n          if (this.sendWait) {\r\n            let msgSize = Object.keys(this.message).length\r\n            return idx === msgSize - 1\r\n          }                  \r\n        },\r\n        sunUnread(data) {          \r\n          let cnt = 0;\r\n          for (let item in data) {\r\n            cnt += data[item]\r\n          }\r\n          if (cnt > 0) {\r\n            return cnt\r\n          }\r\n        },\r\n        scrollToEnd(init) {\r\n          let container = this.$el.querySelector('.message-wrap'),\r\n              html = document.querySelector('html'),\r\n              body = document.querySelector('body'),\r\n              deviceHeight = window.innerHeight,\r\n              current = isCurrentView(deviceHeight, container);\r\n\r\n          if (current || init) {\r\n            html.scrollTop = container.scrollHeight;\r\n            body.scrollTop = container.scrollHeight;\r\n            if (init === 'pop') {\r\n              this.tipFlag = false\r\n            }\r\n          }\r\n          \r\n          return current;\r\n        },\r\n    \r\n        historyBack(){\r\n          this.$router.go(-1)\r\n        },\r\n        async sendMsg(data) {\r\n          // 메세지 수신대기 상태\r\n          this.sendWait = true;\r\n\r\n          data.key = this.$route.params.id\r\n          data.write = this.auth.uid \r\n          // 이미지 첨부할때\r\n          if (data.addFile) {\r\n            data.path = this.preview;\r\n            data.type = 1;\r\n            EventBus.$emit('sendResult', true) \r\n            this.$store.dispatch(CHAT.ADD_IMAGE, data.addFile)\r\n          }\r\n          // 뷰로직\r\n          await this.$store.dispatch('chat/SEND_MESSAGE2', data).then(res => {\r\n              // 프로세스가 순차처리 되었을때\r\n              if (res) {\r\n                this.sendWait = false;\r\n                EventBus.$emit('sendResult', true) \r\n                // 내가 메세지를 보내었으면 스크롤을 하단으로 보낸다.\r\n                this.scrollToEnd(true);\r\n              } else {\r\n                this.sendWait = 'wait';\r\n                this.$store.dispatch('dialogAlert', { message: '메세지 전송중 에러 발생' })\r\n              } \r\n          })\r\n        },\r\n        mappingAvatar(uid) {\r\n          if (this.auth.uid === uid) {\r\n            return this.auth.photoURL\r\n          } else {\r\n            return this.allMember[uid].photoURL\r\n          }\r\n        },\r\n        mappingUserName(uid) {          \r\n          if (this.auth.uid === uid) {\r\n            return this.auth.displayName\r\n          } else {\r\n            if (uid !== 'admin') {\r\n              return this.allMember[uid].displayName\r\n            } else {\r\n              return uid\r\n            }\r\n          }\r\n        },\r\n        isWrite(uid) {\r\n          if (uid === 'admin') {\r\n            return 'notice'\r\n          }\r\n\r\n          if (this.auth.uid === uid) {\r\n            return 'left'\r\n          } else {\r\n            return 'right'\r\n          }\r\n        },\r\n        clear() {\r\n          this.addFile = '';\r\n          this.thumb = '';\r\n        }\r\n\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n#message{\r\n  height: auto;\r\n  top: 0;\r\n  z-index: 20;\r\n  padding-top: 48px;\r\n  > div{\r\n    padding: 0;\r\n  }\r\n  .left{\r\n    .date{\r\n      right: 0;\r\n      margin-right: -70px;\r\n    }\r\n    .unread{\r\n      right: 0;\r\n      margin-right: -14px;\r\n    }\r\n    \r\n    .msgLoading{\r\n      right: 0;\r\n      margin-right: -17px;\r\n    }\r\n  }\r\n  \r\n  .right{\r\n    .date{\r\n      left: 0;\r\n      margin-left: -70px;\r\n    }\r\n    .unread{\r\n      left: 0;\r\n      margin-left: -14px;\r\n    }\r\n    .msgLoading{\r\n      left: 0;\r\n      margin-left: -17px;\r\n    }    \r\n  }\r\n  .msgLoading{\r\n    position: absolute;\r\n    top: 25px;\r\n  }\r\n  .unread{    \r\n    position: absolute;    \r\n    font-size: 11px;\r\n    top: 0;    \r\n    color: #ff5252;\r\n  }\r\n  .date{\r\n    position: absolute;    \r\n    width: 60px;\r\n    font-size: 11px;\r\n    bottom: 0;\r\n    color: #ccc;\r\n  }\r\n  .message-wrap{\r\n    padding-bottom: 150px;\r\n    box-sizing: border-box\r\n  }\r\n  // 멤버레이어가 나올때\r\n  &.inviteWrap {\r\n    // overflow: hidden;\r\n    // height: 100%;\r\n    .message-wrap{      \r\n      height: 100%;\r\n      box-sizing: border-box;\r\n      overflow: hidden;\r\n    }\r\n  }\r\n\r\n  .add-member{\r\n    position: absolute;\r\n    left: 60px;\r\n    top: 17px;\r\n  }\r\n  .addfile-image{\r\n    > img{\r\n      max-width: 150px;\r\n      margin-bottom: 10px;\r\n    }\r\n  }\r\n  .upload-progress{\r\n    position: fixed;\r\n    left: 0;\r\n    top: 0;\r\n    display: flex;\r\n    height: 100%;\r\n    width: 100%;\r\n    justify-content: center;\r\n    align-items: center;\r\n    z-index: 10;\r\n  }\r\n\r\n \r\n  .talk-items{\r\n    display: flex;\r\n    margin: 20px 10px;\r\n    position: relative;\r\n    overflow: hidden;    \r\n    &.right{\r\n          flex-direction: row-reverse;\r\n    } \r\n    &.notice {\r\n      min-height: 43px;\r\n    }\r\n    .img-wrap{\r\n      width: 60px;\r\n      text-align: center;\r\n      flex-shrink: 0;\r\n    }\r\n    .img-wrap .name{\r\n      display: block;\r\n      margin-top: 5px;\r\n      font-size: 12px;\r\n    }\r\n    .talk-wrap{      \r\n      justify-content: center;\r\n      align-items: center;\r\n   }\r\n  }\r\n\r\n  .old-items{\r\n    .talkBox{\r\n      border-color: #ccc;\r\n    }\r\n    .talkBox.left::before{\r\n      border-right-color: #ccc\r\n    }\r\n    .talkBox.right::before{\r\n      border-left-color: #ccc\r\n    }\r\n  }\r\n  .invite{\r\n        top: 64px;\r\n  }\r\n\r\n  @media (max-width: 960px) {\r\n    .invite{\r\n          top: 48px;\r\n    }\r\n  }\r\n  @media (max-width: 600px) {\r\n    .invite{\r\n        top: 56px;\r\n    }\r\n  }\r\n}\r\n.alarmLayer{\r\n    position: fixed;\r\n    bottom: 100px;\r\n    width: 100%;\r\n    text-align: center;\r\n    transition: all 300ms;\r\n    .wrap{\r\n      position: relative;\r\n      display: inline-block;\r\n      \r\n      border: solid 1px #ccc;\r\n      background-color: #fff;\r\n      border-radius: 5px;\r\n      padding: 5px 10px 5px 60px;\r\n      text-align: left;\r\n    }\r\n    .md-avatar{\r\n      position: absolute;\r\n      left: 5px;\r\n      top: 5px;\r\n    }\r\n    .name{      \r\n      display: inline-block;\r\n      line-height: 40px;\r\n      height: 40px;\r\n      vertical-align: middle;\r\n    }\r\n    .text{\r\n      display: inline-block;\r\n      text-overflow: ellipsis;\r\n      vertical-align: middle;\r\n      white-space: nowrap;\r\n      overflow: hidden;      \r\n      height: 40px;\r\n      line-height: 40px;\r\n      padding: 0 10px;\r\n    }\r\n}\r\n// animate\r\n.popmember-enter{\r\n  transform: translate3d(0, 0, 0);\r\n}\r\n.popmember-enter-active{\r\n  transform: translate3d(100%, 0, 0);\r\n}\r\n.popmember-leave-active{\r\n  transform: translate3d(100%, 0, 0);\r\n}\r\n.msgAlarm-leave-active{\r\n  transform: translate3d(0, 80px, 0);\r\n}\r\n.msgAlarm-enter-active{\r\n  transform: translate3d(0, 80px, 0);\r\n}\r\n</style>\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"talkBox\",class:{ old: _vm.old, notice: _vm.notice, right: _vm.right }},[_c('div',{staticClass:\"wrap\"},[_vm._t(\"default\")],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"talkBox\" :class=\"{ old: old, notice: notice, right: right }\">\r\n        <div class=\"wrap\">\r\n            <slot></slot>\r\n        </div>        \r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: 'Talkbox',\r\n        props: {\r\n            old: {\r\n                type: Boolean,\r\n                default: false\r\n            },\r\n            notice: {\r\n                type: Boolean,\r\n                default: false\r\n            },\r\n            right: {\r\n                type: Boolean,\r\n                default: false\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style>\r\n    .talkBox {\r\n        display: inline-block;\r\n        position: relative;\r\n        padding: 10px;\r\n        margin-left: 10px;\r\n        border-radius: 10px;\r\n        border: solid 2px #448aff;\r\n        font-size: 14px;\r\n    }\r\n    .talkBox .wrap{\r\n        word-break: break-all;\r\n    }\r\n    .talkBox::before{\r\n        content: '';\r\n        position: absolute;\r\n        left: -11px;\r\n        top: 8px;\r\n        width: 0px;\r\n        height: 0px;\r\n        border-top: 5px solid transparent;\r\n        border-bottom: 5px solid transparent;\r\n        border-right: 9px solid #448aff;\r\n    }\r\n    .talkBox.right{\r\n        margin-right: 10px;\r\n    }\r\n    .talkBox.right::before{\r\n        content: '';\r\n        position: absolute;\r\n        left: inherit;\r\n        right: -11px;        \r\n        top: 8px;\r\n        border-top: 5px solid transparent;\r\n        border-bottom: 5px solid transparent;\r\n        border-left: 9px solid #448aff;\r\n        border-right: 0;\r\n    }                \r\n    .talkBox.notice {\r\n        width: 100%;\r\n        position: absolute;\r\n        top: 0;\r\n        margin: 0;\r\n        text-align: center;\r\n        border-width: 1px;\r\n        border-color: #e19c9c;\r\n        background-color: rgba(255, 255, 255, .8);    \r\n    }\r\n    .talkBox.notice::before {\r\n        display: none;\r\n    }\r\n\r\n    .old{\r\n        color: #666;\r\n        border-color: #ccc;        \r\n    }\r\n    .old::before{\r\n        border-right-color: #ccc\r\n    }\r\n    .old.right{\r\n        float: right;\r\n        text-align: right;\r\n    }\r\n    .old.right::before{\r\n        border-left-color: #ccc\r\n    }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Talkbox.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Talkbox.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Talkbox.vue?vue&type=template&id=3cabb2d5&\"\nimport script from \"./Talkbox.vue?vue&type=script&lang=js&\"\nexport * from \"./Talkbox.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Talkbox.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Message.vue?vue&type=template&id=9370c260&\"\nimport script from \"./Message.vue?vue&type=script&lang=js&\"\nexport * from \"./Message.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Message.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}