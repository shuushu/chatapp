(function(t){function e(e){for(var n,r,i=e[0],s=e[1],u=e[2],l=0,m=[];l<i.length;l++)r=i[l],o[r]&&m.push(o[r][0]),o[r]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n]);d&&d(e);while(m.length)m.shift()();return c.push.apply(c,u||[]),a()}function a(){for(var t,e=0;e<c.length;e++){for(var a=c[e],n=!0,r=1;r<a.length;r++){var i=a[r];0!==o[i]&&(n=!1)}n&&(c.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},r={app:0},o={app:0},c=[];function i(t){return s.p+"js/"+({}[t]||t)+"."+{"chunk-0682fc54":"259c80b2","chunk-1d3d5873":"c8e9a605","chunk-21fd15fa":"5babaa64","chunk-7134c0ec":"80cd0857","chunk-ac6cebbe":"d64a35e0","chunk-e123192c":"bb1def91"}[t]+".js"}function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.e=function(t){var e=[],a={"chunk-0682fc54":1,"chunk-1d3d5873":1,"chunk-21fd15fa":1,"chunk-7134c0ec":1,"chunk-ac6cebbe":1,"chunk-e123192c":1};r[t]?e.push(r[t]):0!==r[t]&&a[t]&&e.push(r[t]=new Promise(function(e,a){for(var n="css/"+({}[t]||t)+"."+{"chunk-0682fc54":"143a6dc1","chunk-1d3d5873":"7cca2a82","chunk-21fd15fa":"5c90e71b","chunk-7134c0ec":"9962e627","chunk-ac6cebbe":"56f09659","chunk-e123192c":"964f2227"}[t]+".css",o=s.p+n,c=document.getElementsByTagName("link"),i=0;i<c.length;i++){var u=c[i],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===n||l===o))return e()}var m=document.getElementsByTagName("style");for(i=0;i<m.length;i++){u=m[i],l=u.getAttribute("data-href");if(l===n||l===o)return e()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=e,d.onerror=function(e){var n=e&&e.target&&e.target.src||o,c=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");c.request=n,delete r[t],d.parentNode.removeChild(d),a(c)},d.href=o;var f=document.getElementsByTagName("head")[0];f.appendChild(d)}).then(function(){r[t]=0}));var n=o[t];if(0!==n)if(n)e.push(n[2]);else{var c=new Promise(function(e,a){n=o[t]=[e,a]});e.push(n[2]=c);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=i(t),u=function(e){l.onerror=l.onload=null,clearTimeout(m);var a=o[t];if(0!==a){if(a){var n=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src,c=new Error("Loading chunk "+t+" failed.\n("+n+": "+r+")");c.type=n,c.request=r,a[1](c)}o[t]=void 0}};var m=setTimeout(function(){u({type:"timeout",target:l})},12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(e)},s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/",s.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var m=0;m<u.length;m++)e(u[m]);var d=l;c.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0439":function(t,e,a){"use strict";var n,r=a("cebc"),o=a("bd86"),c=a("5176"),i=a.n(c),s=(a("ac6a"),a("a49b")),u=a("b0b0"),l={};s["a"].forEach(function(t){var e;l=i()(l,(e={},Object(o["a"])(e,u["d"]["".concat(t,"_REQ_WAIT")],function(t){t.ready=!0}),Object(o["a"])(e,"".concat(t,"_REQ_SUCCESS"),function(t){t.ready=!1}),Object(o["a"])(e,"".concat(t,"_REQ_FAIL"),function(t){t.ready=!1}),e))}),e["a"]=Object(r["a"])({},l,(n={},Object(o["a"])(n,u["d"].SET_AUTH,function(t,e){t.auth=e}),Object(o["a"])(n,u["d"].SESSION_AUTH,function(t,e){t.auth=e}),Object(o["a"])(n,u["d"].SESSION_OUT,function(t,e){t.auth=e}),Object(o["a"])(n,u["d"].SET_INVITE,function(t,e){t.invite=e}),Object(o["a"])(n,u["d"].ALARM_ON,function(t,e){t.alarm=e}),Object(o["a"])(n,u["d"].POPUP_ALERT,function(t,e){t.popupAlert=Object(r["a"])({isShow:!0},e)}),Object(o["a"])(n,u["d"].POPUP_CONFIRM,function(t,e){t.popupConfirm=Object(r["a"])({isShow:!0},e)}),n))},"1a80":function(t,e,a){},"2e42":function(t,e,a){"use strict";var n=a("a088"),r=a.n(n);r.a},"325c":function(t,e,a){"use strict";a.d(e,"b",function(){return n}),a.d(e,"d",function(){return o}),a.d(e,"c",function(){return r}),a.d(e,"a",function(){return c});a("a481"),a("3b2b");var n=function(t){var e=/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/gi,a=new RegExp(e);return a.test(t)},r=function(t){var e=/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/gi;return t.replace(e,function(t){return'<a href="'+t+'" target="_blank">'+t+"</a>"})},o=function(t){var e=t.getMonth()+1,a=t.getDate();return[t.getFullYear(),(e>9?"":"0")+e,(a>9?"":"0")+a].join("")},c=function(t,e){var a=document.querySelector("html"),n=document.querySelector("body"),r=e.scrollHeight;return(n.scrollTop||a.scrollTop)+t>=r-t}},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.classes.isOnepage,attrs:{id:"app"}},[this.onepage?t._e():a("header",{attrs:{id:"header"}},[a("transition",{attrs:{name:"head"}},["message"===this.$route.name?a("MsgHeader",{attrs:{alarm:t.alarm.total}}):a("Header",{attrs:{alarm:t.alarm.total,name:this.$route.name}})],1)],1),a("transition",{attrs:{name:t.name}},[a("router-view")],1),this.onepage?t._e():a("footer",{attrs:{id:"footer"}},[a("transition",{attrs:{name:"msgform"}},["message"===this.$route.name?a("MessageForm"):a("Footer")],1)],1),t.popupAlert.isShow?a("md-dialog-alert",{attrs:{id:"popupAlert","md-active":t.popupAlert.isShow,"md-content":t.popupAlert.message,"md-confirm-text":"확인"},on:{"update:mdActive":function(e){return t.$set(t.popupAlert,"isShow",e)},"update:md-active":function(e){return t.$set(t.popupAlert,"isShow",e)}}}):t._e(),t.popupConfirm.isShow?a("md-dialog-confirm",{attrs:{id:"popupConfirm","md-active":t.popupConfirm.isShow,"md-title":t.popupConfirm.name,"md-content":t.popupConfirm.message},on:{"update:mdActive":function(e){return t.$set(t.popupConfirm,"isShow",e)},"update:md-active":function(e){return t.$set(t.popupConfirm,"isShow",e)},"md-confirm":function(e){return t.popupConfirm.action(t.popupConfirm)}}}):t._e()],1)},o=[],c=(a("6762"),a("7f7f"),a("cebc")),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("md-toolbar",{staticClass:"md-primary"},[a("div",{staticClass:"md-toolbar-row"},[a("div",{staticClass:"md-toolbar-section-start"},[a("md-button",{staticClass:"md-icon-button",on:{click:t.historyBack}},[a("md-icon",[t._v("arrow_back")])],1)],1),t.name?a("h1",{staticClass:"head-title"},[t._v(t._s(t.name.toUpperCase()))]):t._e(),a("div",{staticClass:"md-toolbar-section-end"},[t.alarm>0?a("md-badge",{attrs:{"md-content":t.alarm}},[a("md-button",{staticClass:"md-icon-button",on:{click:t.goList}},[a("md-icon",[t._v("notifications")])],1)],1):t._e(),a("md-button",{staticClass:"md-icon-button",on:{click:t.logoutConfirm}},[a("md-icon",[t._v("highlight_off")])],1)],1)])])},s=[],u=(a("c5f6"),a("2f62")),l={name:"Header",data:function(){return{selectedEmployee:""}},props:{alarm:{default:0,type:Number},name:{type:String}},methods:Object(c["a"])({},Object(u["b"])(["dialogConfirm","logout"]),{historyBack:function(){this.$router.go(-1)},logoutConfirm:function(){this.dialogConfirm({name:"로그아웃",message:"로그아웃 하시겠습니까?",action:this.actionLogout})},actionLogout:function(){this.logout()},goList:function(){this.$router.push({name:"list"})}})},m=l,d=a("2877"),f=Object(d["a"])(m,i,s,!1,null,null,null),h=f.exports,p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("md-bottom-bar",{attrs:{"md-type":"shift","md-sync-route":""}},[a("md-bottom-bar-item",{attrs:{to:"/member",id:"bottom-bar-item-home","md-label":"MEMBER","md-icon":"people"}}),a("md-bottom-bar-item",{attrs:{to:"/list",id:"bottom-bar-item-pages","md-label":"LIST","md-icon":"chat"}}),a("md-bottom-bar-item",{attrs:{to:"/ready",id:"bottom-bar-item-posts","md-label":"rental","md-icon":"book"}}),a("md-bottom-bar-item",{attrs:{to:"/ready",id:"bottom-bar-item-favorites","md-label":"history","md-icon":"favorite"}})],1)},E=[],b={name:"Footer"},_=b,v=(a("e7bd"),Object(d["a"])(_,p,E,!1,null,"73561f48",null)),g=v.exports,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-area"},[t.thumb?a("div",{staticClass:"img-layer"},[a("md-button",{staticClass:"md-icon-button add-file-close",on:{click:t.clear}},[a("md-icon",[t._v("close")])],1),a("img",{attrs:{src:t.thumb,alt:""}})],1):t._e(),a("md-button",{staticClass:"md-icon-button add-file"},[a("md-icon",[t._v("insert_photo")]),a("input",{staticClass:"file-hidden",attrs:{type:"file",accept:"image/*"},on:{change:t.handleChange}})],1),a("md-field",[a("label",[t._v("입력해주세요")]),a("md-input",{on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendMsg(e)}},model:{value:t.userWrite,callback:function(e){t.userWrite=e},expression:"userWrite"}})],1),a("md-button",{staticClass:"send md-raised md-accent",attrs:{disabled:t.sendLoad},on:{click:t.sendMsg}},[a("md-icon",{staticClass:"md-primary"},[t._v("send")]),a("span",{staticClass:"text"},[t._v("SEND")])],1)],1)},T=[],O=a("325c"),A={name:"MessageForm",data:function(){return{userWrite:"",thumb:null,addFile:null,sendLoad:!1}},created:function(){var t=this;gt.$on("sendResult",function(){t.sendcomplete()})},methods:{handleChange:function(t){var e=this;if(t.target.value){var a=new FileReader;a.readAsDataURL(t.target.files[0]),a.onload=function(){e.thumb=a.result,gt.$emit("imgPreview",a.result)},this.addFile=t.target.files[0]}},clear:function(){this.addFile="",this.thumb=""},sendMsg:function(t){if(t.preventDefault(),!1===this.sendLoad){var e={text:this.userWrite,today:Object(O["d"])(new Date),type:0};if(this.addFile&&(e.addFile=this.addFile),""===this.userWrite){var a={message:"메세지를 입력해주세요"};return this.$store.commit("POPUP_ALERT",a),!0}this.sendLoad=!0,gt.$emit("sendMessage",e)}},sendcomplete:function(){this.userWrite="",this.thumb=null,this.addFile=null,this.sendLoad=!1}}},y=A,C=(a("2e42"),Object(d["a"])(y,S,T,!1,null,"864f6836",null)),R=C.exports,w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("md-toolbar",{staticClass:"md-primary chat-header"},[a("div",{staticClass:"md-toolbar-row"},[a("div",{staticClass:"md-toolbar-section-start"},[a("md-button",{staticClass:"md-icon-button",on:{click:t.historyBack}},[a("md-icon",[t._v("arrow_back")])],1)],1),a("div",{staticClass:"md-toolbar-section-end"},[t.alarm>0?a("md-badge",{attrs:{"md-content":t.alarm}},[a("md-button",{staticClass:"md-icon-button",on:{click:t.goList}},[a("md-icon",[t._v("notifications")])],1)],1):t._e(),a("md-button",{staticClass:"md-accent",on:{click:t.memberJoin}},[a("md-icon",[t._v("people")]),t._v(" \n        다른 멤버 초대\n      ")],1)],1)])])},M=[],L={name:"MsgHeader",props:{alarm:{default:0,type:Number},name:{type:String}},methods:{historyBack:function(){this.$router.go(-1)},memberJoin:function(){this.$store.dispatch("invite")},goList:function(){this.$router.push("/list")}}},k=L,G=Object(d["a"])(k,w,M,!1,null,null,null),I=G.exports,j=["login"],x={name:"app",components:{Footer:g,Header:h,MessageForm:R,MsgHeader:I},data:function(){return{name:"",onepage:!1}},computed:Object(c["a"])({classes:function(){return{isOnepage:{onepage:this.onepage}}}},Object(u["d"])({auth:function(t){return t.auth},alarm:function(t){return t.alarm},popupAlert:function(t){return t.popupAlert},popupConfirm:function(t){return t.popupConfirm}})),watch:{$route:function(t,e){this.routeUpdate(t,e)}},methods:{routeUpdate:function(t,e){var a=this.$route.name;if(this.onepage=j.includes(a),null===e.name)return!0;"message"===t.name&&"list"===e.name&&"message"===a?this.name="message":"list"===t.name&&"message"===e.name&&"list"===a?this.name="list":this.name="none"}}},N=x,U=(a("5c0b"),Object(d["a"])(N,r,o,!1,null,null,null)),P=U.exports,D=a("43f9"),F=a.n(D),Q=a("75fc"),H=a("8c4f"),B=a("8aa5"),$=a.n(B),W=a("5176"),z=a.n(W),Z=(a("96cf"),a("3b8d")),J=a("795b"),V=a.n(J),q=a("f499"),K=a.n(q),Y=a("0439"),X=a("b0b0"),tt={memberList:null},et={GET_MEMBER:function(t,e){t.memberList=e}},at={SET_FILTER:function(){return function(t,e){var a=JSON.parse(K()(t));for(var n in e)a[n].disabled=!0;return a}}},nt={getUserInfo:function(t,e){var a=t.dispatch;return new V.a(function(t){$.a.database().ref("myChat/users/".concat(e)).once("value").then(function(e){e.val()?t(e.val()):(a("dialogAlert2",{message:"멤버정보 오류"}),t(!1))})})},GET_MEMBER:function(t,e){var a=t.commit,n=t.dispatch,r=this.state.member.memberList;if(!r)return a(X["d"].GET_MEMBER_REQ_WAIT,e,{root:!0}),new V.a(function(t,r){$.a.database().ref("myChat/users").on("value",function(o){var c=o.val();c?(a("GET_MEMBER",c),a(X["d"].GET_MEMBER_REQ_SUCCESS,e,{root:!0}),t(c)):(a(X["d"].GET_MEMBER_REQ_FAIL,e,{root:!0}),n("dialogAlert2",{message:"멤버조회 오류"},{root:!0}),r("멤버조회 오류"))})});a(X["d"].GET_MEMBER_REQ_SUCCESS,e,{root:!0})},SET_JOIN:function(){var t=Object(Z["a"])(regeneratorRuntime.mark(function t(e,a){var n,r,o,c;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,r=e.dispatch,n(X["d"].SET_JOIN_REQ_WAIT,null,{root:!0}),t.next=4,rt(a);case 4:if(o=t.sent,!o){t.next=10;break}return n(X["d"].SET_JOIN_REQ_SUCCESS,null,{root:!0}),t.abrupt("return",o);case 10:return c=z()({member:a},{key:$.a.database().ref().push().key}),n(X["d"].SET_JOIN_REQ_SUCCESS,null,{root:!0}),t.next=14,r(X["a"].CREATE_ROOM,c,{root:!0});case 14:return t.abrupt("return",t.sent);case 15:case"end":return t.stop()}},t)}));function e(e,a){return t.apply(this,arguments)}return e}()};function rt(t){var e=t,a=e.length,n={};return new V.a(function(t){2===a?$.a.database().ref("myChat/private/".concat(e[1])).child(e[0]).once("value").then(function(e){e.val()?(n={hasRoom:!0,key:e.val()},t(n.key)):t(!1)}):t(!1)})}var ot,ct={namespaced:!0,state:tt,actions:nt,getters:at,rootMutations:Y["a"],mutations:et},it=a("9b4f"),st={ready:!1,auth:null,popupAlert:{isShow:!1,message:null},popupConfirm:{isShow:!1,name:null,message:null,action:null},invite:!1,alarm:{item:{},total:0}},ut={loginEmail:function(t,e){var a=t.commit,n=t.dispatch,r=e.id,o=e.pw;a(X["d"].LOGIN_EMAIL_REQ_WAIT),$.a.auth().signInWithEmailAndPassword(r,o).catch(function(t){a(X["d"].LOGIN_EMAIL_REQ_FAIL),n("dialogAlert",{message:X["b"][t.code]})}).then(function(t){var e=t.user,n=e.displayName,r=e.uid,o=e.email,c=e.photoURL;c="http://placehold.it/60x60",n=n||o,$.a.database().ref("myChat/users").child(r).set({displayName:n,uid:r,email:o,photoURL:c}),a(X["d"].LOGIN_EMAIL_REQ_SUCCESS)})},createMailID:function(){var t=Object(Z["a"])(regeneratorRuntime.mark(function t(e,a){var n,r,o,c,i,s,u;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.commit,r=e.dispatch,o=a.id,c=a.pw,i=a.name,s=a.thumb,u=null,n(X["d"].CREATE_AUTH_REQ_WAIT),!s){t.next=8;break}return t.next=7,r("chat/ADD_IMAGE",s);case 7:u=t.sent;case 8:return t.next=10,$.a.auth().createUserWithEmailAndPassword(o,c).catch(function(t){n(X["d"].CREATE_AUTH_REQ_FAIL),r("dialogAlert",{message:X["b"][t.code]})}).then(function(t){if(t){var e=t.user.uid,a={};a[e]={email:o,displayName:i,photoURL:u||"http://placehold.it/60x60",uid:e},$.a.database().ref("myChat/users").update(a),n(X["d"].CREATE_AUTH_REQ_SUCCESS)}});case 10:case"end":return t.stop()}},t)}));function e(e,a){return t.apply(this,arguments)}return e}(),loginGoogle:function(t){var e=t.commit,a=t.dispatch;e(X["d"].LOGIN_GOOGLE_AUTH_REQ_WAIT);var n=new $.a.auth.GoogleAuthProvider;n.addScope("https://www.googleapis.com/auth/contacts.readonly"),$.a.auth().signInWithPopup(n).then(function(t){if(t){var a=t.user,n=a.displayName,r=a.uid,o=a.email,c=a.photoURL;$.a.database().ref("myChat/users").child(r).set({displayName:n,uid:r,email:o,photoURL:c}),e(X["d"].LOGIN_GOOGLE_AUTH_REQ_SUCCESS)}}).catch(function(t){e(X["d"].LOGIN_GOOGLE_AUTH_REQ_FAIL),a("dialogAlert",{message:X["b"][t.code]})})},dialogAlert:function(t,e){var a=t.commit;a(X["d"].POPUP_ALERT,e)},logout:function(t){var e=t.dispatch;return new V.a(function(t){$.a.auth().signOut().then(function(){e("dialogAlert",{message:"로그아웃 되었습니다"}),t(!0)}).catch(function(a){console.log(a),e("dialogAlert",{message:X["b"][a.code]}),t(!1)})})},dialogConfirm:function(t,e){var a=t.commit;a(X["d"].POPUP_CONFIRM,e)},getAlarm:function(t){var e=t.commit;ot&&ot.off("value"),ot=$.a.database().ref("myChat/alarm/".concat(this.state.auth.uid)),ot.on("value",function(t){var a=t.val(),n=0;if(a){for(var r in a)n+=a[r];a.total=n,e(X["d"].ALARM_ON,a)}else e(X["d"].ALARM_ON,{item:{},total:0})})},getAlarmOFF:function(t){var e=t.commit;ot&&ot.off("value"),e(X["d"].ALARM_ON,{item:{},total:0})},invite:function(t,e){var a=t.commit,n=void 0===e?!this.state.invite:e;a(X["d"].SET_INVITE,n)}};n["default"].use(u["a"]);var lt=new u["a"].Store({state:st,actions:ut,mutations:Y["a"],modules:{chat:it["a"],member:ct}}),mt=lt;n["default"].use(H["a"]),n["default"].component("router-link",n["default"].options.components.RouterLink),n["default"].component("router-view",n["default"].options.components.RouterView);var dt=[{name:"login",path:"/login",component:"/Login"},{name:"list",path:"/list",component:"/List"},{name:"member",path:"/member",component:"/Member"},{name:"ready",path:"/ready",component:"/Ready"},{name:"message",path:"/message/:id",component:"/Message"},{name:"error",path:"*",component:"/Error"}],ft=[{path:"/",exact:"exact",redirect:"login"}],ht=[].concat(Object(Q["a"])(dt.map(function(t){var e=t.name,n=t.path,r=t.component;return{path:n,name:e,component:function(){return a("5d57")("./container".concat(r))}}})),ft),pt=new H["a"]({mode:"history",base:"/",routes:ht,scrollBehavior:function(t,e,a){return a||{selector:".page",x:0,y:0}}});pt.beforeEach(function(t,e,a){$.a.auth().onAuthStateChanged(function(e){if(e){var n=e.uid;null===mt.state.auth&&$.a.database().ref("myChat/users").child(n).once("value").then(function(t){var e=t.val(),a=e.uid,n=e.email,r=e.displayName,o=e.photoURL;t.val()&&(mt.commit("SET_AUTH",{uid:a,email:n,displayName:r,photoURL:o}),mt.dispatch("getAlarm"))}),"login"===t.name?a("/member"):a()}else setTimeout(function(){mt.commit("SET_AUTH",null),mt.dispatch("getAlarmOFF")},300),"login"===t.name?a():a("/login")})});var Et=pt,bt=a("b112"),_t=a.n(bt),vt=a("a49b");a("51de"),a("e094");a.d(e,"EventBus",function(){return gt});var gt=new n["default"];n["default"].use(_t.a,{store:mt}),$.a.initializeApp(vt["b"]),n["default"].use(F.a),new n["default"]({router:Et,store:mt,render:function(t){return t(P)}}).$mount("#app")},"5c0b":function(t,e,a){"use strict";var n=a("5e27"),r=a.n(n);r.a},"5d57":function(t,e,a){var n={"./container/Error":["c851","chunk-1d3d5873"],"./container/Error.vue":["c851","chunk-1d3d5873"],"./container/List":["9788","chunk-0682fc54"],"./container/List.vue":["9788","chunk-0682fc54"],"./container/Login":["16b7","chunk-ac6cebbe"],"./container/Login.vue":["16b7","chunk-ac6cebbe"],"./container/Member":["1c8f","chunk-7134c0ec"],"./container/Member.vue":["1c8f","chunk-7134c0ec"],"./container/Message":["c9ac","chunk-e123192c"],"./container/Message.vue":["c9ac","chunk-e123192c"],"./container/Ready":["d8c9","chunk-21fd15fa"],"./container/Ready.vue":["d8c9","chunk-21fd15fa"]};function r(t){var e=n[t];return e?a.e(e[1]).then(function(){var t=e[0];return a(t)}):Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}r.keys=function(){return Object.keys(n)},r.id="5d57",t.exports=r},"5e27":function(t,e,a){},"9b4f":function(t,e,a){"use strict";a("7f7f");var n,r,o,c,i=a("cebc"),s=a("a4bb"),u=a.n(s),l=(a("96cf"),a("3b8d")),m=a("f499"),d=a.n(m),f=a("bd86"),h=a("795b"),p=a.n(h),E=a("6ee6"),b=a("8aa5"),_=a.n(b),v=a("0439"),g=a("b112"),S=a("b0b0"),T=a("325c"),O={roomList:null,message:null,oldMsg:null,progress:0,chatMember:null,chatDate:null,latest:!1},A={GET_ROOMLIST:function(t,e){t.roomList=e},GET_MESSAGE:function(t,e){t.message=e},SET_LATEST:function(t,e){t.latest=e},GET_OLD_MESSAGE:function(t,e){t.oldMsg=e},SET_PROGRESS:function(t,e){t.progress=e},GET_CHAT_MEMBER:function(t,e){t.chatMember=e},GET_CHAT_DATE:function(t,e){t.chatDate=e}},y={SET_FAV_ROOM:function(t,e){Object(E["a"])(t);var a=e.key,n=e.state;_.a.database().ref("myChat/list/".concat(this.state.auth.uid,"/").concat(a,"/state")).set(n)},GET_ROOMLIST:function(t,e){var a=t.commit,n=this.state,r=n.auth,o=n.chat,c=n.member,i=e||c.memberList;null===o.roomList?(a(S["d"].GET_ROOMLIST_REQ_WAIT,null,{root:!0}),_.a.database().ref("myChat/list/".concat(r.uid)).on("value",function(t){var e=t.val();if(e){var n=function(t){e[t].join=[],_.a.database().ref("myChat/join/".concat(t,"/")).once("value").then(function(a){var n=a.val();if(n)for(var r in n)e[t].join.push(i[r])})};for(var r in e)n(r);a("GET_ROOMLIST",e),a(S["d"].GET_ROOMLIST_REQ_SUCCESS,null,{root:!0})}else a("GET_ROOMLIST",null),a(S["d"].GET_ROOMLIST_REQ_FAIL,null,{root:!0})})):a(S["d"].GET_ROOMLIST_REQ_SUCCESS,null,{root:!0})},CREATE_ROOM:function(t,e){Object(E["a"])(t);var a=e.member,n=e.key,r={state:0,text:"방이 개설됨"},o=JSON.parse(localStorage.getItem("myChatMessage")),c=new Date;return new p.a(function(t){c=Object(T["d"])(c),2===a.length&&(_.a.database().ref("myChat/private/".concat(a[1])).child(a[0]).set(n),_.a.database().ref("myChat/private/".concat(a[0])).child(a[1]).set(n));for(var e=0;e<a.length;e+=1)_.a.database().ref("myChat/list/".concat(a[e])).child(n).set(r),_.a.database().ref("myChat/join/".concat(n,"/").concat(a[e])).set(0),_.a.database().ref("myChat/alarm/".concat(a[e])).child(n).set(0);if(_.a.database().ref("myChat/room/".concat(n)).set({date:c,item:[{write:"admin",text:"방이 개설됨",unread:0,type:3}]}),null===o){var i=Object(f["a"])({},n,Object(f["a"])({},c,{}));o=i,localStorage.setItem("myChatMessage",d()(o))}t(n)})},DELETE_ROOM:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(e,a){var n,r,o,c,i,s,l,m;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.dispatch,r=a,o=this.state.auth.uid,c=this.state.member.memberList,t.next=6,_.a.database().ref("myChat/join/".concat(r,"/")).once("value").then(function(t){return t.val()});case 6:if(i=t.sent,i){t.next=10;break}return n("dialogAlert",{message:"삭제 할 수 없음 myChat/join/".concat(r,"/ 문제 발생")},{root:!0}),t.abrupt("return",!1);case 10:if(s=u()(i),!(s.length<=1)){t.next=15;break}_.a.database().ref("myChat/room/".concat(r)).set(null),t.next=27;break;case 15:return l="".concat(c[o].displayName,"님이 방을 나갔습니다."),t.next=18,_.a.database().ref("myChat/room/".concat(r,"/item")).push({write:"admin",text:l,unread:0,type:3});case 18:m=0;case 19:if(!(m<s.length)){t.next=27;break}if(s.length<=2&&(_.a.database().ref("myChat/private/".concat(o,"/").concat(s[m])).set(null),_.a.database().ref("myChat/private/".concat(s[m],"/").concat(o)).set(null)),s[m]===o){t.next=24;break}return t.next=24,_.a.database().ref("myChat/list/".concat(s[m],"/").concat(r,"/text")).set(l);case 24:m+=1,t.next=19;break;case 27:return t.next=29,_.a.database().ref("myChat/list/".concat(o,"/").concat(r)).set(null);case 29:_.a.database().ref("myChat/alarm/".concat(o,"/").concat(r)).set(null),_.a.database().ref("myChat/join/".concat(r,"/").concat(o)).set(null),n("dialogAlert",{message:"선택한 방 삭제 완료"},{root:!0});case 32:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}(),GET_CURRENT_MEMBER:function(t,e){var a=t.commit;return o&&o.off("value"),o=_.a.database().ref("myChat/join/".concat(e)),new p.a(function(t){o.on("value",function(e){var n=e.val();if(n){var r=0;for(var o in n)0===n[o]&&(r+=1);a("GET_CHAT_MEMBER",{data:n,total:r}),t({data:n,total:r})}else t(!1)})})},GET_MESSAGE:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(e,a){var r,o,c,s,u,l,m,h,p;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:r=e.commit,o=e.dispatch,c=a.key,s=a.today,u=this.state.auth.uid,l=this.state.chat.chatDate,m=JSON.parse(localStorage.getItem("myChatMessage")),n&&n.off("value"),null===m&&(h=Object(f["a"])({},c,Object(f["a"])({},s,{})),m=h),m[c]||(p=Object(f["a"])({},c,Object(f["a"])({},s,{})),m=Object(i["a"])({},p,m)),localStorage.setItem("myChatMessage",d()(m)),o("GET_CURRENT_MEMBER",c),r(S["d"].GET_MESSAGE_REQ_WAIT,null,{root:!0}),_.a.database().ref("myChat/alarm/".concat(u,"/").concat(c)).set(0),l!==s&&_.a.database().ref("myChat/room/".concat(c)).set({date:s,item:[{text:s,type:3,unread:0,write:"admin"}]}),n=_.a.database().ref("myChat/room/".concat(c,"/item")),n.once("value",function(t){var e=t.val();if(e){for(var a in e)0!==e[a].unread&&e[a].write!==u&&1!==e[a].read[u]&&(e[a].unread-=1,e[a].read[u]=1);_.a.database().ref("myChat/room/".concat(c,"/item")).set(e)}}),n.on("value",function(t){var e=t.val();e?(l===s&&(m[c][s]=e),r("GET_MESSAGE",e),localStorage.setItem("myChatMessage",d()(m))):r(S["d"].GET_MESSAGE_REQ_FAIL,null,{root:!0})});case 13:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}(),ROOMOUT:regeneratorRuntime.mark(function t(){var e=this,a=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(g["call"])(function(){return new p.a(function(){_.a.database().ref("myChat/room/".concat(a[1],"/isLogin/").concat(e.state.auth.uid)).set(0),n&&n.off("value")})});case 2:case"end":return t.stop()}},t)}),GET_OLD_MESSAGE:regeneratorRuntime.mark(function t(){var e,a,n,r,o,c=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(g["put"])(S["d"].GET_OLD_MESSAGE_REQ_WAIT);case 2:if(e=localStorage.getItem("myChatMessage"),a=c[1],!e){t.next=12;break}for(o in n=JSON.parse(e),r={},n[a.key])o!=a.today&&(r[o]=n[a.key][o]);return t.next=8,Object(g["put"])(S["a"].GET_OLD_MESSAGE,r);case 8:return t.next=10,Object(g["put"])(S["d"].GET_OLD_MESSAGE_REQ_SUCCESS);case 10:t.next=14;break;case 12:return t.next=14,Object(g["put"])(S["d"].GET_OLD_MESSAGE_REQ_FAIL);case 14:case"end":return t.stop()}},t)}),SET_LATEST:regeneratorRuntime.mark(function t(){var e,a=this,n=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=n[1].key,t.next=3,Object(g["call"])(function(){return new p.a(function(){c&&c.off("value"),c=_.a.database().ref("myChat/room/".concat(e,"/latest")),c.on("value",function(t){t.val()&&a.commit(S["a"].SET_LATEST,t.val())})})});case 3:case"end":return t.stop()}},t)}),REMOVE_LATEST:regeneratorRuntime.mark(function t(){var e=this,a=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(g["call"])(function(){return new p.a(function(){_.a.database().ref("myChat/room/".concat(a[1],"/latest")).set(!1),e.commit(S["a"].SET_LATEST,!1)})});case 2:case"end":return t.stop()}},t)}),SEND_MESSAGE2:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(e,a){var n,r,o,c,s,u,l,m,d,f,h,p,E,b;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:for(b in n=e.commit,r=a.type,o=a.write,c=a.today,s=a.key,u=a.text,l=a.path,m=this.state.chat,d=m.chatMember,f=m.chatDate,h=m.message,null,p=_.a.database().ref("myChat/room").push(),p=p.getKey(),h[p]={type:r,text:u,write:o,unread:d.total,read:d.data},Object(T["b"])(u)&&(h[p].text=Object(T["c"])(u),h[p].vhtml=!0),1===r&&(h[p].path=l),n(S["a"].GET_MESSAGE,h,{root:!0}),f!==c?(E=[{text:c,type:3,unread:0,write:"admin"}],_.a.database().ref("myChat/room/".concat(s,"/date")).set(c),_.a.database().ref("myChat/room/".concat(s,"/item")).set(Object(i["a"])({},E,h)),resolve(!0)):_.a.database().ref("myChat/room/".concat(s,"/item")).set(h),d.data)_.a.database().ref("myChat/list/".concat(b,"/").concat(s,"/text")).set(u),_.a.database().ref("myChat/list/".concat(b,"/").concat(s,"/lwrite")).set(o),0===d.data[b]&&function(){var t=_.a.database().ref("myChat/alarm/".concat(b,"/").concat(s));t.once("value",function(e){e&&t.set(e.val()+1)})}();return t.abrupt("return",!0);case 10:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}(),ADD_IMAGE:function(t,e){var a=t.commit;return new p.a(function(t){var n=e,r=_.a.storage().ref("myChat/".concat(n.name)),o=r.put(n);o.on("state_changed",function(t){var e=t.bytesTransferred/t.totalBytes*100;a(S["a"].SET_PROGRESS,e,{root:!0})},function(e){t(e.message)},function(){o.snapshot.ref.getDownloadURL().then(function(e){t(e)})})})},SET_JOIN:function(t,e){Object(E["a"])(t);var a=e.type,r=e.key,o=this.state.auth.uid;_.a.database().ref("myChat/join/".concat(r,"/").concat(o)).set("IN"===a?1:0),n&&"OUT"===a&&n.off("value")},GET_CHAT_DATE:function(t,e){var a=t.commit;return r&&r.off("value"),new p.a(function(t){r=_.a.database().ref("myChat/room/".concat(e.key,"/date")),r.on("value",function(e){a("GET_CHAT_DATE",e.val()),t(!0)})})}};e["a"]={namespaced:!0,state:O,actions:y,rootMutations:v["a"],mutations:A}},a088:function(t,e,a){},a49b:function(t,e,a){"use strict";a.d(e,"b",function(){return n}),a.d(e,"a",function(){return r});var n={apiKey:"AIzaSyBwc5tkZM3fEQcyPC1-HfguTbIt8woO9iA",authDomain:"shushu-cb26c.firebaseapp.com",databaseURL:"https://shushu-cb26c.firebaseio.com",storageBucket:"shushu-cb26c.appspot.com"},r=["INIT","LOGIN_EMAIL","LOGIN_GOOGLE_AUTH","CREATE_AUTH","GET_MEMBER","GET_ROOMLIST","GET_MESSAGE","GET_OLD_MESSAGE","SET_JOIN","SEND_MESSAGE","DELETE_ROOM"]},b0b0:function(t,e,a){"use strict";a.d(e,"c",function(){return u}),a.d(e,"a",function(){return l}),a.d(e,"b",function(){return m});var n=a("cebc"),r=a("bd86"),o=a("5176"),c=a.n(o),i=(a("ac6a"),a("a49b")),s=(a("9b4f"),{});i["a"].forEach(function(t){var e;s=c()(s,(e={},Object(r["a"])(e,"".concat(t,"_REQ_WAIT"),"".concat(t,"_REQ_WAIT")),Object(r["a"])(e,"".concat(t,"_REQ_SUCCESS"),"".concat(t,"_REQ_SUCCESS")),Object(r["a"])(e,"".concat(t,"_REQ_FAIL"),"".concat(t,"_REQ_FAIL")),e))}),e["d"]=Object(n["a"])({},s,{SET_AUTH:"SET_AUTH",SESSION_AUTH:"SESSION_AUTH",SESSION_OUT:"SESSION_OUT",SET_INVITE:"SET_INVITE",POPUP_ALERT:"POPUP_ALERT",POPUP_CONFIRM:"POPUP_CONFIRM",ALARM_ON:"ALARM_ON"});var u={GET_MEMBER:"member/GET_MEMBER",SET_JOIN:"member/SET_JOIN",SET_FILTER:"member/SET_FILTER"},l={GET_ROOMLIST:"chat/GET_ROOMLIST",GET_MESSAGE:"chat/GET_MESSAGE",GET_OLD_MESSAGE:"chat/GET_OLD_MESSAGE",SEND_MESSAGE:"chat/SEND_MESSAGE",ADD_IMAGE:"chat/ADD_IMAGE",SET_PROGRESS:"chat/SET_PROGRESS",GET_CHAT_DATE:"chat/GET_CHAT_DATE",ROOMOUT:"chat/ROOMOUT",SET_LATEST:"chat/SET_LATEST",REMOVE_LATEST:"chat/REMOVE_LATEST",CREATE_ROOM:"chat/CREATE_ROOM"},m={"auth/wrong-password":"비밀번호가 잘못 되었습니다","auth/user-not-found":"아이디가 잘못 되었습니다.","auth/email-already-in-use":"해당 이메일 사용되고 있습니다.","auth/popup-closed-by-user":"계정선택 팝업창을 닫아 로그인 화면으로 돌아갑니다."}},e7bd:function(t,e,a){"use strict";var n=a("1a80"),r=a.n(n);r.a}});
//# sourceMappingURL=app.9d3214db.js.map