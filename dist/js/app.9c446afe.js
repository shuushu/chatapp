(function(e){function t(t){for(var a,r,i=t[0],u=t[1],s=t[2],m=0,d=[];m<i.length;m++)r=i[m],o[r]&&d.push(o[r][0]),o[r]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);l&&l(t);while(d.length)d.shift()();return c.push.apply(c,s||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],a=!0,r=1;r<n.length;r++){var i=n[r];0!==o[i]&&(a=!1)}a&&(c.splice(t--,1),e=u(u.s=n[0]))}return e}var a={},r={app:0},o={app:0},c=[];function i(e){return u.p+"js/"+({}[e]||e)+"."+{"chunk-04869cf8":"80f88694","chunk-0714cbc6":"0eb8661c","chunk-2567a75f":"a471e370","chunk-331c571e":"af31d0bf","chunk-bf8b74c8":"a1ab5b9b","chunk-dd322ae6":"9d80c280"}[e]+".js"}function u(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={"chunk-04869cf8":1,"chunk-0714cbc6":1,"chunk-2567a75f":1,"chunk-331c571e":1,"chunk-bf8b74c8":1,"chunk-dd322ae6":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise(function(t,n){for(var a="css/"+({}[e]||e)+"."+{"chunk-04869cf8":"5c90e71b","chunk-0714cbc6":"00f1b532","chunk-2567a75f":"7cca2a82","chunk-331c571e":"eb015f11","chunk-bf8b74c8":"b3250fb8","chunk-dd322ae6":"496ea282"}[e]+".css",o=u.p+a,c=document.getElementsByTagName("link"),i=0;i<c.length;i++){var s=c[i],m=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(m===a||m===o))return t()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){s=d[i],m=s.getAttribute("data-href");if(m===a||m===o)return t()}var l=document.createElement("link");l.rel="stylesheet",l.type="text/css",l.onload=t,l.onerror=function(t){var a=t&&t.target&&t.target.src||o,c=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");c.request=a,delete r[e],l.parentNode.removeChild(l),n(c)},l.href=o;var f=document.getElementsByTagName("head")[0];f.appendChild(l)}).then(function(){r[e]=0}));var a=o[e];if(0!==a)if(a)t.push(a[2]);else{var c=new Promise(function(t,n){a=o[e]=[t,n]});t.push(a[2]=c);var s,m=document.createElement("script");m.charset="utf-8",m.timeout=120,u.nc&&m.setAttribute("nonce",u.nc),m.src=i(e),s=function(t){m.onerror=m.onload=null,clearTimeout(d);var n=o[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src,c=new Error("Loading chunk "+e+" failed.\n("+a+": "+r+")");c.type=a,c.request=r,n[1](c)}o[e]=void 0}};var d=setTimeout(function(){s({type:"timeout",target:m})},12e4);m.onerror=m.onload=s,document.head.appendChild(m)}return Promise.all(t)},u.m=e,u.c=a,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)u.d(n,a,function(t){return e[t]}.bind(null,a));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/chat/",u.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],m=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var l=m;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"1a80":function(e,t,n){},"325c":function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"c",function(){return o}),n.d(t,"b",function(){return r});n("a481"),n("3b2b");var a=function(e){var t=/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/gi,n=new RegExp(t);return n.test(e)},r=function(e){var t=/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/gi;return e.replace(t,function(e){return'<a href="'+e+'" target="_blank">'+e+"</a>"})},o=function(e){var t=e.getMonth()+1,n=e.getDate();return[e.getFullYear(),(t>9?"":"0")+t,(n>9?"":"0")+n].join("")}},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var a,r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.classes.isOnepage,attrs:{id:"app"}},[this.onepage?e._e():n("header",{attrs:{id:"header"}},[n("transition",{attrs:{name:"head"}},["message"===this.$route.name?n("MsgHeader"):n("Header",{attrs:{name:this.$route.name}})],1)],1),n("transition",{attrs:{name:e.name}},[n("router-view")],1),this.onepage?e._e():n("footer",{attrs:{id:"footer"}},[n("transition",{attrs:{name:"msgform"}},["message"===this.$route.name?n("MessageForm"):n("Footer")],1)],1),e.popupAlert.isShow?n("md-dialog-alert",{attrs:{id:"popupAlert","md-active":e.popupAlert.isShow,"md-content":e.popupAlert.message,"md-confirm-text":"확인"},on:{"update:mdActive":function(t){return e.$set(e.popupAlert,"isShow",t)},"update:md-active":function(t){return e.$set(e.popupAlert,"isShow",t)}}}):e._e(),e.popupConfirm.isShow?n("md-dialog-confirm",{attrs:{id:"popupConfirm","md-active":e.popupConfirm.isShow,"md-title":e.popupConfirm.name,"md-content":e.popupConfirm.message},on:{"update:mdActive":function(t){return e.$set(e.popupConfirm,"isShow",t)},"update:md-active":function(t){return e.$set(e.popupConfirm,"isShow",t)},"md-confirm":function(t){return e.popupConfirm.action(e.popupConfirm)}}}):e._e()],1)},c=[],i=(n("6762"),n("7f7f"),n("cebc")),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("md-toolbar",{staticClass:"md-primary"},[n("div",{staticClass:"md-toolbar-row"},[n("div",{staticClass:"md-toolbar-section-start"},[n("md-button",{staticClass:"md-icon-button",on:{click:e.historyBack}},[n("md-icon",[e._v("arrow_back")])],1)],1),e.name?n("h1",{staticClass:"head-title"},[e._v(e._s(e.name.toUpperCase()))]):e._e(),n("div",{staticClass:"md-toolbar-section-end"},[n("md-button",{staticClass:"md-icon-button",on:{click:e.logout}},[n("md-icon",[e._v("highlight_off")])],1)],1)])])},s=[],m={name:"Header",data:function(){return{selectedEmployee:""}},props:{name:{type:String}},methods:{historyBack:function(){this.$router.go(-1)},logout:function(){this.$run("dialogConfirm",{name:"로그아웃",message:"로그아웃 하시겠습니까?",action:this.actionLogout})},actionLogout:function(){var e=this;this.$run("logout").then(function(t){e.$run("dialogAlert",{message:t?"로그아웃 되었습니다":t.code})})}}},d=m,l=n("2877"),f=Object(l["a"])(d,u,s,!1,null,null,null),h=f.exports,p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("md-bottom-bar",{attrs:{"md-type":"shift","md-sync-route":""}},[n("md-bottom-bar-item",{attrs:{to:"/member",id:"bottom-bar-item-home","md-label":"MEMBER","md-icon":"people"}}),n("md-bottom-bar-item",{attrs:{to:"/list",id:"bottom-bar-item-pages","md-label":"LIST","md-icon":"chat"}}),n("md-bottom-bar-item",{attrs:{to:"/ready",id:"bottom-bar-item-posts","md-label":"rental","md-icon":"book"}}),n("md-bottom-bar-item",{attrs:{to:"/ready",id:"bottom-bar-item-favorites","md-label":"history","md-icon":"favorite"}})],1)},E=[],b={name:"Footer"},_=b,g=(n("e7bd"),Object(l["a"])(_,p,E,!1,null,"73561f48",null)),v=g.exports,S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"form-area"},[e.thumb?n("div",{staticClass:"img-layer"},[n("md-button",{staticClass:"md-icon-button add-file-close",on:{click:e.clear}},[n("md-icon",[e._v("close")])],1),n("img",{attrs:{src:e.thumb,alt:""}})],1):e._e(),n("md-button",{staticClass:"md-icon-button add-file"},[n("md-icon",[e._v("insert_photo")]),n("input",{staticClass:"file-hidden",attrs:{type:"file",accept:"image/*"},on:{change:e.handleChange}})],1),n("md-field",[n("label",[e._v("입력해주세요")]),n("md-input",{model:{value:e.userWrite,callback:function(t){e.userWrite=t},expression:"userWrite"}})],1),n("md-button",{staticClass:"send md-raised md-accent",attrs:{disabled:e.sendLoad},on:{click:e.sendMsg}},[n("md-icon",{staticClass:"md-primary"},[e._v("send")]),n("span",{staticClass:"text"},[e._v("SEND")])],1)],1)},w=[],O=n("325c"),T={name:"MessageForm",data:function(){return{userWrite:"",thumb:null,addFile:null,sendLoad:!1}},created:function(){var e=this;Ae.$on("sendResult",function(){e.sendcomplete()})},methods:{handleChange:function(e){var t=this;if(e.target.value){var n=new FileReader;n.readAsDataURL(e.target.files[0]),n.onload=function(){t.thumb=n.result},this.addFile=e.target.files[0]}},clear:function(){this.addFile="",this.thumb=""},sendMsg:function(){var e={text:this.userWrite,today:Object(O["c"])(new Date),type:0};if(this.addFile&&(e.addFile=this.addFile),""===this.userWrite){var t={message:"메세지를 입력해주세요"};return this.$run("dialogAlert",t),!0}this.sendLoad=!0,Ae.$emit("sendMessage",e)},sendcomplete:function(){this.userWrite="",this.thumb=null,this.addFile=null,this.sendLoad=!1}}},A=T,R=(n("efc5"),Object(l["a"])(A,S,w,!1,null,"091fb58c",null)),y=R.exports,C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("md-toolbar",{staticClass:"md-primary chat-header"},[n("div",{staticClass:"md-toolbar-row"},[n("div",{staticClass:"md-toolbar-section-start"},[n("md-button",{staticClass:"md-icon-button",on:{click:e.historyBack}},[n("md-icon",[e._v("arrow_back")])],1)],1),n("md-button",{staticClass:"md-accent",on:{click:e.memberJoin}},[n("md-icon",[e._v("people")]),e._v(" \n      다른 멤버 초대\n    ")],1)],1)])},M=[],k={name:"MsgHeader",data:function(){return{selectedEmployee:"dsadasd"}},props:{name:{type:String}},methods:{historyBack:function(){this.$router.go(-1)},memberJoin:function(){this.$run("invite")}}},G=k,I=Object(l["a"])(G,C,M,!1,null,null,null),x=I.exports,L=n("2f62"),j=["login"],U={name:"app",components:{Footer:v,Header:h,MessageForm:y,MsgHeader:x},data:function(){return{name:"",onepage:!1}},computed:Object(i["a"])({classes:function(){return{isOnepage:{onepage:this.onepage}}}},Object(L["c"])({popupAlert:function(e){return e.popupAlert},popupConfirm:function(e){return e.popupConfirm}})),watch:{$route:function(e,t){this.$run("getDeviceHeight",window.innerHeight),this.routeUpdate(e,t)}},methods:{routeUpdate:function(e,t){var n=this.$route.name;if(this.onepage=j.includes(n),null===t.name)return!0;"message"===e.name&&"list"===t.name&&"message"===n?this.name="message":"list"===e.name&&"message"===t.name&&"list"===n?this.name="list":this.name="none"}}},N=U,D=(n("5c0b"),Object(l["a"])(N,o,c,!1,null,null,null)),H=D.exports,P=n("43f9"),Q=n.n(P),F=n("75fc"),B=n("8c4f"),$=n("8aa5"),W=n.n($),z=n("795b"),Z=n.n(z),J=(n("96cf"),n("f499")),V=n.n(J),q=n("bd86"),K=n("5176"),Y=n.n(K),X=(n("ac6a"),n("a49b")),ee=n("b0b0"),te={};X["a"].forEach(function(e){var t;te=Y()(te,(t={},Object(q["a"])(t,ee["d"]["".concat(e,"_REQ_WAIT")],function(e){e.ready=!0}),Object(q["a"])(t,"".concat(e,"_REQ_SUCCESS"),function(e){e.ready=!1}),Object(q["a"])(t,"".concat(e,"_REQ_FAIL"),function(e){e.ready=!1}),t))});var ne,ae,re=Object(i["a"])({},te,(a={},Object(q["a"])(a,ee["d"].SET_AUTH,function(e,t){e.auth=t}),Object(q["a"])(a,ee["d"].SESSION_AUTH,function(e,t){e.auth=t}),Object(q["a"])(a,ee["d"].SESSION_OUT,function(e,t){e.auth=t}),Object(q["a"])(a,ee["d"].SET_INVITE,function(e,t){e.invite=t}),Object(q["a"])(a,ee["d"].DEVICE_HEIGHT,function(e,t){e.height=t}),Object(q["a"])(a,ee["d"].POPUP_ALERT,function(e,t){e.popupAlert=Object(i["a"])({isShow:!0},t)}),Object(q["a"])(a,ee["d"].POPUP_CONFIRM,function(e,t){e.popupConfirm=Object(i["a"])({isShow:!0},t)}),a)),oe=n("b112"),ce=n.n(oe),ie={memberList:null},ue={GET_MEMBER:function(e,t){e.memberList=t}},se={SET_FILTER:function(){return function(e,t){for(var n=JSON.parse(V()(e)),a=0,r=t.length;a<r;a+=1)n[t[a]].disabled=!0;return n}}},me={GET_MEMBER:regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!ie.memberList){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(oe["put"])(ee["d"].GET_MEMBER_REQ_WAIT);case 4:return e.next=6,Object(oe["call"])(function(){return new Z.a(function(e){W.a.database().ref("myChat/users").on("value",function(n){var a=n.val(),r={};for(var o in a)r[o]=a[o];a?(t.commit(ee["c"].GET_MEMBER,r),t.commit(ee["d"].GET_MEMBER_REQ_SUCCESS),e(r)):(t.commit(ee["d"].GET_MEMBER_REQ_FAIL),e(null))})})});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e)}),SET_JOIN:regeneratorRuntime.mark(function e(){var t,n,a,r=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=r[1],n=t.length,a={},e.next=3,Object(oe["put"])(ee["d"].SET_JOIN_REQ_WAIT);case 3:return e.next=5,Object(oe["call"])(function(){return new Z.a(function(e){2===n?W.a.database().ref("myChat/private/".concat(t[1])).child(t[0]).once("value").then(function(n){n.val()?a={hasRoom:!0,key:n.val()}:(a.hasRoom=!1,a.key=W.a.database().ref("myChat/private/".concat(t[1])).push().key,W.a.database().ref("myChat/private/".concat(t[1])).child(t[0]).set(a.key),W.a.database().ref("myChat/private/".concat(t[0])).child(t[1]).set(a.key)),e(a)}):(a.hasRoom=!1,a.key=W.a.database().ref().push().key,e(a))})});case 5:if(a=e.sent,!a.hasRoom){e.next=12;break}return e.next=9,Object(oe["put"])(ee["d"].SET_JOIN_REQ_SUCCESS);case 9:return e.abrupt("return",a.key);case 12:return e.next=14,Object(oe["put"])(ee["d"].SET_JOIN_REQ_SUCCESS);case 14:return e.next=16,Object(oe["call"])(function(){return new Z.a(function(e){var r={state:0,join:t,text:"방이 개설됨"},o=new Date;o=Object(O["c"])(o);for(var c=0;c<n;c+=1)W.a.database().ref("myChat/list/".concat(t[c])).child(a.key).update(r);var i={};i.members=t,i.item=[{write:"admin",text:"방이 개설됨",type:3}],i.date=o,W.a.database().ref("myChat/room/".concat(a.key)).set(i),e(a.key)})});case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}},e)})},de={namespaced:!0,state:ie,actions:me,getters:se,rootMutations:re,mutations:ue},le={roomList:null,message:null,oldMsg:null,progress:0,chatMember:null,chatDate:null},fe={GET_ROOMLIST:function(e,t){e.roomList=t},GET_MESSAGE:function(e,t){e.message=t},GET_OLD_MESSAGE:function(e,t){e.oldMsg=t},SET_PROGRESS:function(e,t){e.progress=t},GET_CHAT_MEMBER:function(e,t){e.chatMember=t},GET_CHAT_DATE:function(e,t){e.chatDate=t}},he={GET_ROOMLIST:regeneratorRuntime.mark(function e(t,n){var a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t.state.roomList){e.next=2;break}return e.abrupt("return",!0);case 2:return e.next=4,Object(oe["put"])(ee["d"].GET_ROOMLIST_REQ_WAIT);case 4:return e.next=6,Object(oe["call"])(function(){return new Z.a(function(){var e=t.rootState.auth.uid;ne=W.a.database().ref("myChat/list/".concat(e)),ne.on("value",function(e){var t=e.val();if(t){var r=function(e){for(var t={},a=0,r=e.length;a<r;a+=1){var o=e[a];t[o]=n[o]}return t};for(var o in t)t[o].join=r(t[o].join);a.commit(ee["a"].GET_ROOMLIST,t),a.commit(ee["d"].GET_ROOMLIST_REQ_SUCCESS)}else a.commit(ee["a"].GET_ROOMLIST,null),a.commit(ee["d"].GET_ROOMLIST_REQ_FAIL)})})});case 6:case"end":return e.stop()}},e)}),GET_MESSAGE:regeneratorRuntime.mark(function e(){var t=this,n=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return ae&&ae.off("value"),e.next=3,Object(oe["put"])(ee["d"].GET_MESSAGE_REQ_WAIT);case 3:return e.next=5,Object(oe["call"])(function(){return new Z.a(function(){var e={},a=n[1],r=t.state.chat.chatDate;if(e=JSON.parse(localStorage.getItem("myChatMessage")),null===e){var o={};o[a.key]={},o[a.key][a.today]={},e=o}e[a.key]||(e[a.key]={},e[a.key][a.today]={}),r!==a.today&&(W.a.database().ref("myChat/room/".concat(a.key,"/date")).set(a.today),W.a.database().ref("myChat/room/".concat(a.key,"/item")).set([{text:a.today,type:3,write:"admin"}])),ae=W.a.database().ref("myChat/room/".concat(a.key,"/item")),ae.on("value",function(n){n.val()?(r===a.today&&(e[a.key][a.today]=n.val()),localStorage.setItem("myChatMessage",V()(e)),t.commit(ee["a"].GET_MESSAGE,n.val()),t.commit(ee["d"].GET_MESSAGE_REQ_SUCCESS)):t.commit(ee["d"].GET_MESSAGE_REQ_FAIL)})})});case 5:case"end":return e.stop()}},e)}),GET_OLD_MESSAGE:regeneratorRuntime.mark(function e(){var t,n,a,r,o,c=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(oe["put"])(ee["d"].GET_OLD_MESSAGE_REQ_WAIT);case 2:if(t=localStorage.getItem("myChatMessage"),n=c[1],!t){e.next=12;break}for(o in a=JSON.parse(t),r={},a[n.key])o!=n.today&&(r[o]=a[n.key][o]);return e.next=8,Object(oe["put"])(ee["a"].GET_OLD_MESSAGE,r);case 8:return e.next=10,Object(oe["put"])(ee["d"].GET_OLD_MESSAGE_REQ_SUCCESS);case 10:e.next=14;break;case 12:return e.next=14,Object(oe["put"])(ee["d"].GET_OLD_MESSAGE_REQ_FAIL);case 14:case"end":return e.stop()}},e)}),SEND_MESSAGE:regeneratorRuntime.mark(function e(){var t,n,a,r,o,c,u,s,m,d,l,f,h,p,E,b=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:for(t=b[1],n=t.type,a=t.write,r=t.today,o=t.key,c=t.text,u=t.path,s={type:n,text:c,write:a},m=this.state.chat.chatMember,d=this.state.chat.chatDate,r=new Date,r=Object(O["c"])(r),Object(O["a"])(c)&&(s.text=Object(O["b"])(c),s.vhtml=!0),1===n&&(s.path=u),d!==r?(l={},f=W.a.database().ref("myChat/room").push(),h=[{text:r,type:3,write:"admin"}],f=f.getKey(),l[f]=s,W.a.database().ref("myChat/room/".concat(o,"/date")).set(r),W.a.database().ref("myChat/room/".concat(o,"/item")).set(Object(i["a"])({},h,l))):W.a.database().ref("myChat/room/".concat(o,"/item")).push(s),p=0,E=m.length;p<E;p+=1)W.a.database().ref("myChat/list/".concat(m[p],"/").concat(o,"/text")).set(c);return e.next=9,Object(oe["put"])(ee["d"].SEND_MESSAGE_REQ_SUCCESS);case 9:case"end":return e.stop()}},e,this)}),ADD_IMAGE:regeneratorRuntime.mark(function e(){var t,n=this,a=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a[1],e.next=3,Object(oe["call"])(function(){return new Z.a(function(e){var a=W.a.storage().ref("myChat/".concat(t.name)),r=a.put(t);r.on("state_changed",function(e){var t=e.bytesTransferred/e.totalBytes*100;n.commit(ee["a"].SET_PROGRESS,t)},function(t){e(t.message)},function(){r.snapshot.ref.getDownloadURL().then(function(t){e(t)})})})});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}),GET_CHAT_MEMBER:regeneratorRuntime.mark(function e(){var t,n=this,a=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a[1],e.next=3,Object(oe["call"])(function(){return new Z.a(function(){W.a.database().ref("myChat/room/".concat(t.key,"/members")).once("value").then(function(e){n.commit(ee["a"].GET_CHAT_MEMBER,e.val())})})});case 3:case"end":return e.stop()}},e)}),GET_CHAT_DATE:regeneratorRuntime.mark(function e(){var t,n=this,a=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a[1],e.next=3,Object(oe["call"])(function(){return new Z.a(function(e){W.a.database().ref("myChat/room/".concat(t.key,"/date")).on("value",function(t){n.commit(ee["a"].GET_CHAT_DATE,t.val()),e(!0)})})});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)})},pe={namespaced:!0,state:le,actions:he,rootMutations:re,mutations:fe},Ee={ready:!1,auth:null,height:null,popupAlert:{isShow:!1,message:null},popupConfirm:{isShow:!1,name:null,message:null,action:null},invite:!1},be={loginEmail:regeneratorRuntime.mark(function e(t,n){var a,r,o=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=n.id,r=n.pw,e.next=3,Object(oe["put"])(ee["d"].LOGIN_EMAIL_REQ_WAIT);case 3:return e.next=5,Object(oe["call"])(function(){return new Z.a(function(e){W.a.auth().signInWithEmailAndPassword(a,r).catch(function(t){e(Object(i["a"])({},t,{state:!1})),o.commit(ee["d"].LOGIN_EMAIL_REQ_FAIL)}).then(function(t){t&&(e({state:!0}),o.commit(ee["d"].LOGIN_EMAIL_REQ_SUCCESS))})})});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)}),createMailID:regeneratorRuntime.mark(function e(t,n){var a,r,o,c=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=n.id,r=n.pw,o=n.name,e.next=3,Object(oe["put"])(ee["d"].CREATE_AUTH_REQ_WAIT);case 3:return e.next=5,Object(oe["call"])(function(){return new Z.a(function(e){W.a.auth().createUserWithEmailAndPassword(a,r).catch(function(t){c.commit(ee["d"].CREATE_AUTH_REQ_FAIL),e(Object(i["a"])({},t,{state:!1}))}).then(function(t){if(t){var n=t.user.uid,r={};r[n]={email:a,displayName:o,photoURL:"http://placehold.it/60x60",uid:n},W.a.database().ref("myChat/users").update(r),c.commit(ee["d"].CREATE_AUTH_REQ_SUCCESS),e({state:!0})}})})});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)}),loginGoogle:regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(oe["put"])(ee["d"].LOGIN_GOOGLE_AUTH_REQ_WAIT);case 2:return e.next=4,Object(oe["call"])(function(){return new Z.a(function(e){var n=new W.a.auth.GoogleAuthProvider;n.addScope("https://www.googleapis.com/auth/contacts.readonly"),W.a.auth().signInWithPopup(n).then(function(n){if(n){var a=n.user,r=a.displayName,o=a.uid,c=a.email,i=a.photoURL;e(Y()({displayName:r,uid:o,email:c,photoURL:i},{state:!0})),W.a.database().ref("myChat/users").child(o).set({displayName:r,uid:o,email:c,photoURL:i}),t.commit(ee["d"].LOGIN_GOOGLE_AUTH_REQ_SUCCESS)}}).catch(function(n){e(Object(i["a"])({},n,{state:!1})),t.commit(ee["d"].LOGIN_GOOGLE_AUTH_REQ_FAIL)})})});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)}),getSession:regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.state.auth,e.next=3,Object(oe["call"])(function(){return new Z.a(function(e){null===n?W.a.auth().onAuthStateChanged(function(n){n?W.a.database().ref("myChat/users/".concat(n.uid)).once("value").then(function(n){t.commit(ee["d"].SESSION_AUTH,n.val()),e(n.val())}):t.commit(ee["d"].SESSION_OUT,null)}):e(n)})});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}),logout:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(oe["call"])(function(){return new Z.a(function(e){W.a.auth().signOut().then(function(){e(!0)}).catch(function(t){e(!1,t)})})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}),dialogAlert:regeneratorRuntime.mark(function e(){var t=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(oe["put"])(ee["d"].POPUP_ALERT,t[1]);case 2:case"end":return e.stop()}},e)}),dialogConfirm:regeneratorRuntime.mark(function e(){var t=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(oe["put"])(ee["d"].POPUP_CONFIRM,t[1]);case 2:case"end":return e.stop()}},e)}),invite:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(oe["put"])(ee["d"].SET_INVITE,!this.state.invite);case 2:case"end":return e.stop()}},e,this)}),getDeviceHeight:regeneratorRuntime.mark(function e(){var t=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(oe["put"])(ee["d"].DEVICE_HEIGHT,t[1]);case 2:case"end":return e.stop()}},e)})};r["default"].use(L["a"]);var _e=new L["a"].Store({state:Ee,actions:be,mutations:re,modules:{chat:pe,member:de}}),ge=_e;r["default"].use(B["a"]),r["default"].component("router-link",r["default"].options.components.RouterLink),r["default"].component("router-view",r["default"].options.components.RouterView);var ve=[{name:"login",path:"/login",component:"/Login"},{name:"list",path:"/list",component:"/List"},{name:"member",path:"/member",component:"/Member"},{name:"ready",path:"/ready",component:"/Ready"},{name:"message",path:"/message/:id",component:"/Message"},{name:"error",path:"*",component:"/Error"}],Se=[{path:"/",exact:"exact",redirect:"login"}],we=[].concat(Object(F["a"])(ve.map(function(e){var t=e.name,a=e.path,r=e.component;return{path:a,name:t,component:function(){return n("5d57")("./container".concat(r))}}})),Se),Oe=new B["a"]({mode:"history",base:"/chat",routes:we});Oe.beforeEach(function(e,t,n){W.a.auth().onAuthStateChanged(function(t){t?ge.state.auth?"login"===e.name?n("/member"):n():W.a.database().ref("myChat/users/".concat(t.uid)).once("value").then(function(t){ge.commit("SESSION_AUTH",t.val()),"login"===e.name?n("/member"):n()}):"login"===e.name?n():n("/login")})});var Te=Oe;n("51de"),n("e094");n.d(t,"EventBus",function(){return Ae});var Ae=new r["default"];r["default"].use(ce.a,{store:ge}),W.a.initializeApp(X["b"]),r["default"].use(Q.a),new r["default"]({router:Te,store:ge,render:function(e){return e(H)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var a=n("5e27"),r=n.n(a);r.a},"5d57":function(e,t,n){var a={"./container/Error":["c851","chunk-2567a75f"],"./container/Error.vue":["c851","chunk-2567a75f"],"./container/List":["9788","chunk-bf8b74c8"],"./container/List.vue":["9788","chunk-bf8b74c8"],"./container/Login":["16b7","chunk-331c571e"],"./container/Login.vue":["16b7","chunk-331c571e"],"./container/Member":["1c8f","chunk-0714cbc6"],"./container/Member.vue":["1c8f","chunk-0714cbc6"],"./container/Message":["c9ac","chunk-dd322ae6"],"./container/Message.vue":["c9ac","chunk-dd322ae6"],"./container/Ready":["d8c9","chunk-04869cf8"],"./container/Ready.vue":["d8c9","chunk-04869cf8"]};function r(e){var t=a[e];return t?n.e(t[1]).then(function(){var e=t[0];return n(e)}):Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}r.keys=function(){return Object.keys(a)},r.id="5d57",e.exports=r},"5e27":function(e,t,n){},a054:function(e,t,n){},a49b:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return r});var a={apiKey:"AIzaSyBwc5tkZM3fEQcyPC1-HfguTbIt8woO9iA",authDomain:"shushu-cb26c.firebaseapp.com",databaseURL:"https://shushu-cb26c.firebaseio.com",storageBucket:"shushu-cb26c.appspot.com"},r=["INIT","LOGIN_EMAIL","LOGIN_GOOGLE_AUTH","CREATE_AUTH","GET_MEMBER","GET_ROOMLIST","GET_MESSAGE","GET_OLD_MESSAGE","SET_JOIN","SEND_MESSAGE"]},b0b0:function(e,t,n){"use strict";n.d(t,"c",function(){return s}),n.d(t,"a",function(){return m}),n.d(t,"b",function(){return d});var a=n("cebc"),r=n("bd86"),o=n("5176"),c=n.n(o),i=(n("ac6a"),n("a49b")),u={};i["a"].forEach(function(e){var t;u=c()(u,(t={},Object(r["a"])(t,"".concat(e,"_REQ_WAIT"),"".concat(e,"_REQ_WAIT")),Object(r["a"])(t,"".concat(e,"_REQ_SUCCESS"),"".concat(e,"_REQ_SUCCESS")),Object(r["a"])(t,"".concat(e,"_REQ_FAIL"),"".concat(e,"_REQ_FAIL")),t))}),t["d"]=Object(a["a"])({},u,{SET_AUTH:"SET_AUTH",SESSION_AUTH:"SESSION_AUTH",SESSION_OUT:"SESSION_OUT",SET_INVITE:"SET_INVITE",DEVICE_HEIGHT:"DEVICE_HEIGHT",POPUP_ALERT:"POPUP_ALERT",POPUP_CONFIRM:"POPUP_CONFIRM"});var s={GET_MEMBER:"member/GET_MEMBER",SET_JOIN:"member/SET_JOIN",SET_FILTER:"member/SET_FILTER"},m={GET_ROOMLIST:"chat/GET_ROOMLIST",GET_MESSAGE:"chat/GET_MESSAGE",GET_OLD_MESSAGE:"chat/GET_OLD_MESSAGE",SEND_MESSAGE:"chat/SEND_MESSAGE",ADD_IMAGE:"chat/ADD_IMAGE",SET_PROGRESS:"chat/SET_PROGRESS",GET_CHAT_MEMBER:"chat/GET_CHAT_MEMBER",GET_CHAT_DATE:"chat/GET_CHAT_DATE"},d={"auth/wrong-password":"비밀번호가 잘못 되었습니다","auth/user-not-found":"아이디가 잘못 되었습니다.","auth/email-already-in-use":"해당 이메일 사용되고 있습니다.","auth/popup-closed-by-user":"계정선택 팝업창을 닫아 로그인 화면으로 돌아갑니다."}},e7bd:function(e,t,n){"use strict";var a=n("1a80"),r=n.n(a);r.a},efc5:function(e,t,n){"use strict";var a=n("a054"),r=n.n(a);r.a}});
//# sourceMappingURL=app.9c446afe.js.map