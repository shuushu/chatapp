(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dd322ae6","chunk-0714cbc6"],{"1c8f":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page",class:{invite:t.chatMember},attrs:{id:"memberList"}},[t.isLoading?a("div",{staticClass:"wrap-center"},[a("md-progress-spinner",{attrs:{"md-diameter":50,"md-mode":"indeterminate"}})],1):a("div",[null===t.member?a("div",{staticClass:"md-empty-state-wrap"},[a("md-empty-state",{staticClass:"md-primary",attrs:{"md-icon":"sentiment_dissatisfied","md-label":"Nothing in Done","md-description":"대화 가능 한 멤버 없음"}})],1):a("md-list",t._l(t.fetchData,function(e,i){return a("div",{key:i},[t.auth.uid!=i?a("md-list-item",{staticClass:"md-triple-line md-dense"},[a("md-checkbox",{attrs:{disabled:e.disabled,value:e.uid},model:{value:t.checkArr,callback:function(e){t.checkArr=e},expression:"checkArr"}}),a("md-avatar",[a("img",{attrs:{src:e.photoURL,alt:e.displayName}})]),a("div",{staticClass:"md-list-item-text"},[a("span",{staticClass:"title"},[t._v(t._s(e.displayName))]),a("span",{staticClass:"desc"},[t._v(t._s(e.email))])])],1):t._e()],1)}),0),a("div",{class:{btnWrap:t.chatMember}},[t.checkArr.length>0?a("md-button",{staticClass:"join md-raised md-accent",on:{click:function(e){return t.memberJoin()}}},[a("md-icon",{staticClass:"md-primary"},[t._v("people")]),t._v(" JOIN\n        ")],1):t._e(),t.chatMember?a("md-button",{staticClass:"join md-raised md-primary",on:{click:function(e){return t.toggle()}}},[a("md-icon",{staticClass:"md-primary"},[t._v("cancel")]),t._v(" cancel\n        ")],1):t._e()],1)],1)])},s=[],r=a("cebc"),n=a("2f62"),c=a("b0b0"),l=a("325c"),o={name:"Member",data:function(){return{checkArr:[],temp:null}},props:{chatMember:{type:Array}},computed:Object(r["a"])({fetchData:function(){return this.chatMember?this.filter(this.member,this.chatMember):this.member}},Object(n["c"])({auth:function(t){return t.auth},isLoading:function(t){return t.ready},member:function(t){return t.member.memberList}}),Object(n["b"])({filter:c["c"].SET_FILTER})),created:function(){this.$run(c["c"].GET_MEMBER)},methods:{toggle:function(){this.$run("invite")},memberJoin:function(){var t=this;this.chatMember?(this.$run("dialogAlert",{message:"초대하였습니다."}),this.checkArr=this.checkArr.concat(this.chatMember)):this.checkArr.push(this.auth.uid),this.$run(c["c"].SET_JOIN,this.checkArr).then(function(e){t.$router.push("/message/".concat(e));var a=Object(l["c"])(new Date);if(t.chatMember){var i={key:e,today:a};null===t.member?t.$router.push("/list"):(t.$run(c["a"].GET_CHAT_MEMBER,i),t.$run(c["a"].GET_CHAT_DATE,i).then(function(e){e&&(t.$run(c["a"].GET_MESSAGE,i),t.$run(c["a"].GET_OLD_MESSAGE,i),t.toggle())}))}})}}},u=o,m=(a("8cb3"),a("2877")),d=Object(m["a"])(u,i,s,!1,null,null,null);e["default"]=d.exports},"3f48":function(t,e,a){"use strict";var i=a("e729"),s=a.n(i);s.a},"69c2":function(t,e,a){"use strict";var i=a("6ebc"),s=a.n(i);s.a},"6ebc":function(t,e,a){},"8cb3":function(t,e,a){"use strict";var i=a("f45f"),s=a.n(i);s.a},c9ac:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page",class:{inviteWrap:t.invite},attrs:{id:"message"}},[t.isLoading?a("div",{staticClass:"wrap-center"},[a("md-progress-spinner",{attrs:{"md-diameter":50,"md-mode":"indeterminate"}})],1):a("div",{staticClass:"message-wrap",style:"min-height:"+(t.deviceHeight-80)+"px"},[t._l(t.oldMsg,function(e,i){return a("div",{key:"old-"+i,staticClass:"old-items"},t._l(e,function(e,i){return a("div",{key:"old-item-"+i,staticClass:"talk-items",class:t.isWrite(e.write)},["notice"!=t.isWrite(e.write)?a("div",{staticClass:"img-wrap"},[a("md-avatar",[a("img",{attrs:{src:t.mappingAvatar(e.write),alt:t.mappingUserName(e.write)}})]),a("span",{staticClass:"name"},[t._v(t._s(t.mappingUserName(e.write)))])],1):t._e(),a("div",{staticClass:"talk-wrap"},[a("Talkbox",{class:t.isWrite(e.write)},[t._v("                \n                "+t._s(e.text)+"\n                ")])],1)])}),0)}),t._l(t.message,function(e,i){return a("div",{key:i,staticClass:"talk-items",class:t.isWrite(e.write)},["notice"!=t.isWrite(e.write)?a("div",{staticClass:"img-wrap"},[a("md-avatar",[a("img",{attrs:{src:t.mappingAvatar(e.write),alt:t.mappingUserName(e.write)}})]),a("span",{staticClass:"name"},[t._v(t._s(t.mappingUserName(e.write)))])],1):t._e(),a("div",{staticClass:"talk-wrap"},[a("Talkbox",{class:t.isWrite(e.write)},[1===e.type?a("div",{staticClass:"addfile-image"},[a("img",{attrs:{src:e.path,alt:""}})]):t._e(),e.vhtml?a("span",{domProps:{innerHTML:t._s(e.text)}}):a("span",[t._v(t._s(e.text))])])],1)])})],2),t.pgr>0&&t.pgr<100?a("div",{staticClass:"upload-progress"},[a("md-progress-spinner",{staticClass:"md-accent",attrs:{"md-mode":"determinate","md-value":t.pgr}})],1):t._e(),a("transition",{attrs:{name:"popmember"}},[t.invite?a("Member",{attrs:{chatMember:t.chatMember}}):t._e()],1)],1)},s=[],r=a("795b"),n=a.n(r),c=a("cebc"),l=a("2f62"),o=a("b0b0"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"talkBox",class:{old:t.old,notice:t.notice,right:t.right}},[a("div",{staticClass:"wrap"},[t._t("default")],2)])},m=[],d={name:"Talkbox",props:{old:{type:Boolean,default:!1},notice:{type:Boolean,default:!1},right:{type:Boolean,default:!1}}},h=d,p=(a("69c2"),a("2877")),f=Object(p["a"])(h,u,m,!1,null,null,null),g=f.exports,b=a("1c8f"),v=a("56d7"),_=a("325c"),E={name:"Message",components:{Talkbox:g,Member:b["default"]},data:function(){return{scrollFlag:!1}},computed:Object(c["a"])({},Object(l["c"])({invite:function(t){return t.invite},auth:function(t){return t.auth},isLoading:function(t){return t.ready},message:function(t){return t.chat.message},oldMsg:function(t){return t.chat.oldMsg},member:function(t){return t.member.memberList},chatMember:function(t){return t.chat.chatMember},chatDate:function(t){return t.chat.chatDate},pgr:function(t){return t.chat.progress},deviceHeight:function(t){return t.height}})),watch:{message:function(){this.scrollToEnd()}},destroyed:function(){v["EventBus"].$off("sendMessage")},created:function(){var t=this,e={key:this.$route.params.id,today:Object(_["c"])(new Date)};v["EventBus"].$on("sendMessage",function(e){e&&t.sendMsg(e)}),null===this.member?this.$router.push("/list"):(this.$run(o["a"].GET_CHAT_MEMBER,e),this.$run(o["a"].GET_CHAT_DATE,e).then(function(a){a&&(t.$run(o["a"].GET_MESSAGE,e),t.$run(o["a"].GET_OLD_MESSAGE,e))}))},updated:function(){var t=this;this.scrollFlag||(setTimeout(function(){t.scrollToEnd()},1e3),this.scrollFlag=!0)},methods:{scrollToEnd:function(){var t=this.$el.querySelector(".message-wrap"),e=document.querySelector("html"),a=document.querySelector("body");e.scrollTop=t.scrollHeight,a.scrollTop=t.scrollHeight},historyBack:function(){this.$router.go(-1)},sendMsg:function(t){var e=this;t.key=this.$route.params.id,t.write=this.auth.uid,new n.a(function(a){t.addFile?e.$run(o["a"].ADD_IMAGE,t.addFile).then(function(i){t.path=i,t.type=1,e.$run(o["a"].SEND_MESSAGE,t),a(!0)}):(e.$run(o["a"].SEND_MESSAGE,t),a(!0))}).then(function(t){t?(v["EventBus"].$emit("sendResult",!0),e.scrollToEnd()):e.$run("dialogAlert",{message:"Error"})})},mappingAvatar:function(t){return this.auth.uid===t?this.auth.photoURL:this.member[t].photoURL},mappingUserName:function(t){return this.auth.uid===t?this.auth.displayName:"admin"!==t?this.member[t].displayName:t},isWrite:function(t){return"admin"===t?"notice":this.auth.uid===t?"left":"right"},handleChange:function(t){var e=this;if(t.target.value){var a=new FileReader;a.readAsDataURL(t.target.files[0]),a.onload=function(){e.thumb=a.result},this.addFile=t.target.files[0]}},clear:function(){this.addFile="",this.thumb=""}}},M=E,y=(a("3f48"),Object(p["a"])(M,i,s,!1,null,null,null));e["default"]=y.exports},e729:function(t,e,a){},f45f:function(t,e,a){}}]);
//# sourceMappingURL=chunk-dd322ae6.9d80c280.js.map